---
description: 이슈를 자율적으로 분석→계획→수정→검증→재발방지까지 처리한다. 사용자 개입 0.
---

## /issue — 자율 이슈 해결 파이프라인

> **분류**: 오케스트레이터. 완전 자율 실행.
> **이론적 기반**: 8D Problem Solving + Cynefin Framework
> **핵심 교훈**: 테스트 통과 ≠ 올바른 해법. Green은 증상 제거를 증명하지, 원인 제거를 증명하지 않는다.

### 원칙

1. **사용자 개입 0**. "/issue 이거 고쳐" 한 마디면 끝까지 자율 실행.
2. **LLM 비용은 0**. reflect, doubt, review를 아낌없이 실행. 무거워도 상관없다.
3. **Red Team = 환기**. /doubt의 가치는 "수정 강제"가 아니라 "시야 확장". 모든 지적을 반영할 필요 없다.
4. **코드 전에 생각, 코드 후에 의심**. Sunk cost가 판단을 흐리기 전에 방향을 잡는다.

---

### Phase 1: 이해 (코드 수정 없음)

#### 1. 이슈 등록
- 위치: `docs/1-project/0-issue/YYYY-MM-DD_<슬러그>.md`
- 형식: 원문 + 환경 + 재현 단계 + 기대 결과 + 실제 결과

#### 2. Triage (심각도 분류)
- `P0` — 빌드 불가 / 전체 라우트 영향
- `P1` — 특정 기능 완전 동작 불가
- `P2` — 부분적 이상, 대안 존재
- `P3` — cosmetic / 개선사항

#### 3. 분석 — `/diagnose` 실행
- 코드를 수정하지 않고 원인을 분석한다.
- **관련 프로젝트 문서를 먼저 읽는다** — PRD, Proposal, Status.
- Before 스냅샷 기록.

---

### Phase 2: 계획 (코드 수정 없음)

#### 4. 설계 냄새 검사

수정안을 떠올렸으면, **코드를 고치기 전에** 4개 질문:

| # | 질문 | "예"이면 |
|---|------|---------|
| 1 | 수정이 개체(concept)를 **늘리는가**? | 설계 의심 |
| 2 | 호출자가 **내부 로직을 알아야** 하는가? | 설계 의심 |
| 3 | 같은 버그가 **다른 환경/경로에서도** 날 수 있는가? | 설계 의심 |
| 4 | 수정 후 **API surface가 커지는가**? | 설계 의심 |

- 하나라도 "예" → 코드 패치가 아니라 **설계 변경**을 먼저 계획.

#### 5. /reflect — 방향 점검

코드를 쓰기 전에 자문한다:

```
□ 이 수정은 어디서 해야 하나? (shim? 본질?)
□ 영향 범위는? (headless만? 브라우저도? 둘 다?)
□ 기존 메커니즘으로 해결 가능한가? (새 코드 대신 기존 배선 수정?)
□ 같은 문제가 다른 곳에서도 발생하는가?
```

#### 6. 수정 계획 출력

```markdown
## 수정 계획
- **뭘**: [1문장]
- **어디서**: [파일/함수]  
- **왜 여기가 본질인가**: [1문장]
- **shim vs 본질**: [본질 / shim(사유)]
```

계획을 출력한 뒤 바로 Phase 3로 진행. 사용자 확인 불필요.

---

### Phase 3: 실행

#### 7. /tdd — 재현 테스트 (Red)
- 실패하는 테스트 = 이슈 존재 증명.
- 테스트는 별도 파일에 작성.

#### 8. /solve — 테스트 통과 (Green)
- 수정 계획(Step 6)에 따라 코드 수정.
- **계획과 다른 방향으로 가게 되면 멈추고 Step 5로 돌아간다.**

---

### Phase 4: 검증 (코드 수정 가능하지만, 먼저 의심)

#### 9. /doubt — 본질성 검증 (환기)

Green 달성 직후, 커밋 전에 자문한다:

```
□ 이 수정은 shim인가 본질인가?
□ 같은 문제가 다른 환경(headless/browser)에서도 해결되었나?
□ 기존 메커니즘을 활용했나, 새 guard를 추가했나?
□ 수정 없이 기존 설계로 해결 가능하지 않았나?
```

**발견 시**: 더 나은 해법이 보이면 Step 5로 돌아간다.
**미발견 시**: 현재 수정 유지. 환기만으로도 가치 있다.

#### 10. /review — 코드 리뷰

- 네이밍, 구조, 일관성 확인.
- rules.md 위반 여부 체크.

#### 11. /verify — 검증 게이트

- `tsc` + `vitest run` (관련 테스트 + 전체 리그레션).
- 실패하면 Step 8로 돌아간다.

#### 12. 커밋 + push

---

### Phase 5: 종료

#### 13. 이슈 종료
1. 이슈 문서에 `[Closed]` + 해결 요약.
2. 이슈 파일을 `docs/1-project/0-issue/closed/`로 이동.

#### 14. 재발 방지
- 근본 원인이 구조적/패턴적 → `/rules` 실행하여 규칙 추가.

---

### 재현 실패 시 Fallback

1. Vite 터미널 로그 확인.
2. 사용자에게 콘솔 에러 요청.
3. **추측으로 원인을 단정하지 않는다.**
4. 에러 메시지를 확보한 후에만 분석 진행.
