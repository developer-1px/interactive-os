---
description: 이슈를 프로젝트에 등록한 뒤, 기존 workflow 조합으로 분석→수정→검증→재발방지까지 체계적으로 처리한다.
---

## /issue — 이슈 기반 체계적 문제 해결 파이프라인

```
등록 → Triage → 베이스라인(/ready)
→ 분석(/diagnose) → 문서 읽기
  ──[Gate ①: Known/Open 분류 → 사용자 확인]──
→ 재현 테스트(/tdd)
→ 분해·수정(/divide)
  ──[Gate ②: 테스트 통과]──
→ 코드리뷰(/review)
→ 검증(/fix)
→ 재발방지(/rules)
→ 이슈 종료 & 최종 리포트
```

---

### Why this workflow? (5 Whys)

1. 왜 이슈 workflow가 필요한가? → 버그를 발견하면 바로 코드를 고치려 들어서, **같은 실수가 반복**된다.
2. 왜 같은 실수가 반복되는가? → 고치는 데만 집중하고, **원인 분석·재발 방지를 건너뛰기** 때문이다.
3. 왜 원인 분석과 재발 방지를 건너뛰는가? → "빨리 고치자"는 압박 속에서 **체계적 절차가 없으면 자연스럽게 생략**되기 때문이다.
4. 왜 체계적 절차가 없는가? → 개별 workflow는 있지만, **이것들을 언제·어떤 순서로 조합해야 하는지** 상위 파이프라인이 없었다.
5. 왜 상위 파이프라인이 없었는가? → **이슈의 생애주기(등록→분석→수정→검증→종료)를 하나의 흐름으로 묶는 관점**이 빠져 있었다.

> **근본 원인**: 개별 도구는 충분하지만, 이슈의 전체 생애주기를 관통하는 오케스트레이션이 없었다.

---

### 1. 이슈 등록

- 접수 즉시 이슈 문서를 생성한다. 분석 전에 **먼저 파일을 만든다**.
- 위치: `docs/1-project/0-issue/YYYY-MM-DD_<슬러그>.md`
- 형식:
  ```markdown
  # 🐛 [한줄 제목]
  > 등록일: YYYY-MM-DD
  > 상태: open
  > 심각도: P?

  ## 원문
  사용자가 말한 그대로. 한 글자도 바꾸지 않는다.

  ## 환경 (Environment)
  - 브라우저/OS: Chrome 121, macOS Sonoma
  - 화면 크기: 1440x900
  - 관련 서버 상태: App 5555 ✅ / Docs 4444 ✅

  ## 재현 단계 (Reproduction Steps)
  1. [구체적 행동 — URL, 클릭 위치, 키 입력]
  2. [구체적 행동]
  3. [구체적 행동]

  ## 기대 결과 (Expected)
  [무엇이 일어나야 하는가. PRD 시나리오 참조 시 링크.]

  ## 실제 결과 (Actual)
  [실제로 무엇이 일어났는가. 에러 메시지, 스크린샷 포함.]

  ## 관련 이슈
  `docs/1-project/0-issue/` 를 검색하여 유사 이슈가 있으면 링크.
  ```

#### 재현 실패 시 Fallback

브라우저로 재현을 시도했는데 **빈 화면, 크래시, 접근 불가** 시:

1. **Vite 터미널 로그 확인** — 서버 에러가 있는지 `command_status`로 확인한다.
2. **사용자에게 콘솔 에러 요청** — "DevTools Console(F12)에 에러가 있으면 알려주세요"
3. **추측으로 원인을 단정하지 않는다** — 에러 메시지 없이 코드를 수정하면 삽질 루프에 진입한다.
4. 에러 메시지를 확보한 후에만 분석 단계로 진행한다.

### 2. Triage (심각도 분류)

- 이슈의 **영향 범위(blast radius)**를 판단하여 심각도를 부여한다.
  - `P0` — 빌드 불가 / 전체 라우트 영향
  - `P1` — 특정 기능 완전 동작 불가
  - `P2` — 부분적 이상, 대안 존재
  - `P3` — cosmetic / 개선사항
- 심각도에 따라 전략을 결정한다:
  - P0–P1 → `/diagnose` 없이 `/divide`로 바로 분해·수정 (긴급)
  - P2–P3 → `/diagnose`로 충분한 분석 후 진행

### 3. 베이스라인 확보 — `/ready`

> 이슈를 분석하기 전에 **앱이 돌아가는 상태**를 먼저 확보한다.
> 깨진 환경 위에서 이슈를 파악하면 "이슈인지 환경 문제인지" 구분할 수 없다.

- `/ready` 실행 — tsc + 서버 + 렌더 스모크 확인 & 복구
- 환경이 정상이 된 후에만 이슈 분석으로 진행한다

### 4. 분석 — `/diagnose` 실행

- 이슈와 관련된 테스트 또는 에러를 대상으로 `/diagnose`를 실행한다.
- 코드를 수정하지 않고 원인을 분석하고 삽질 일지를 작성한다.
- **Before 스냅샷**: 수정 전 테스트 결과(X fail / Y pass)를 기록한다.
- **관련 프로젝트 문서를 먼저 읽는다** — `docs/1-project/`에서 관련 PRD, Proposal, Status를 찾아 읽는다. 문서가 없으면 그 사실을 기록한다.
- 삽질 일지의 "원인 추정"을 이슈 문서에 요약 링크한다.

#### Gate Check ① — Known/Open 분류 & 이해 확인

분석 결과를 다음 형식으로 **사용자에게 보고**한다. 보고 없이 수정으로 넘어가지 않는다.

```markdown
**Known** (코드에서 확인한 사실):
- 예: "파일 X가 커밋 Y에서 삭제됨"
- 예: "Vite alias는 설정되어 있으나 대상 파일 없음"

**Open** (판단·확인이 필요한 질문):
- 예: "삭제가 의도적인가, 실수인가?"
- 예: "복구해야 한다면 어디서 호출해야 하는가?"

**내 이해 1문장**: "~이렇게 동작해야 하는 것으로 이해했다"
```

- 사용자가 **"맞다"** → 다음 단계 진행
- 사용자가 **교정** → 이해를 수정하고 다시 보고. 코드를 수정하지 않는다.
- Open 항목이 있는데 사용자 확인 없이 추측으로 결정하면 **이 게이트를 위반**한 것이다.

### 5. 재현 테스트 — `/tdd` 실행

- 이슈를 재현하는 **실패하는 테스트**를 먼저 작성한다.
- `/tdd`는 내부적으로 `/test`를 호출하여 적절한 레벨의 테스트를 생성한다.
- 실패하는 테스트 = 이슈가 실제로 존재한다는 증명.

### 6. 분해 & 수정 — `/divide` 실행

- 실패하는 테스트를 통과시키기 위해 `/divide`로 문제를 분해한다.
- 정답인 것은 수정, 아닌 것은 사용자에게 질문.
- 분해 보고서를 작성한다.

#### Gate Check ②
- 재현 테스트가 **통과**하는가?
  - ✅ → 다음 단계 진행
  - ❌ → 수정 계속. 통과할 때까지 진행하지 않는다.

### 7. 코드 리뷰 — `/review` 실행

- 수정된 코드가 프로젝트 철학, 네이밍, 구조 규칙을 위반하지 않는지 확인한다.
- 위반 사항이 있으면 수정 후 재검증한다.

### 8. 검증 — `/fix` 실행

- Smoke test → Type check → Build 순서로 시스템 안정성을 확인한다.
- 수정으로 인한 사이드이펙트가 없는지 검증한다.

### 9. 재발 방지 — `/rules` 실행 (해당 시)

- 이슈의 근본 원인이 구조적/패턴적 문제인 경우, `.agent/rules.md`에 규칙을 추가한다.
- 예: "X를 import할 때는 반드시 Y facade를 사용할 것"

### 10. 이슈 종료 — 커밋 & 최종 리포트

1. 변경 파일을 **커밋**한다.
2. 이슈 문서의 제목에 `[Closed]`를 붙이고, 상태를 `closed`로 변경하고, **해결 요약 + changelog**를 문서 끝에 추가한다.
3. 이슈 파일을 `docs/1-project/0-issue/closed/`로 이동한다.
4. 아래 형식으로 해결 요약을 작성한다:
   ```markdown
   ## 해결 요약
   - 원인: ...
   - 수정: ... (변경 파일 목록)
   - 검증: smoke ✅ / type ✅ / build ✅

   ## Changelog
   | 커밋 | 내용 |
   |------|------|
   | `해시` | 커밋 메시지 — 변경 파일 요약 |
   ```
5. **프로젝트 BOARD 통합**: 관련 프로젝트가 있으면 해당 프로젝트의 `BOARD.md` Done 섹션에 이슈 해결 기록을 추가한다.
   - 형식: `- [x] 🐛 이슈 제목 — 원인 한줄 요약 (완료일)`
6. **`/retrospect`를 실행**하여 이슈 처리 과정의 개발·협업·워크플로우를 KPT로 회고한다.
7. 사용자에게 최종 리포트를 보고한다.
