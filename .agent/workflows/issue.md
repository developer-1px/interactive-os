---
description: 이슈를 프로젝트에 등록한 뒤, 기존 workflow 조합으로 분석→수정→검증→재발방지까지 체계적으로 처리한다.
---

## /issue — 이슈 기반 체계적 문제 해결 파이프라인

```
등록 → Triage → 분석(/diagnose)
  ──[Gate: 원인 확신도 ≥ 중간]──
→ 분해·수정(/divide)
  ──[Gate: 단위 테스트 통과]──
→ 코드리뷰(/review)
→ 검증(/fix)
→ 테스트 보강(/test)
→ 재발방지(/rules) + 학습기록(/til)
→ 이슈 종료 & 최종 리포트
```

---

### Why this workflow? (5 Whys)

1. 왜 이슈 workflow가 필요한가? → 버그를 발견하면 바로 코드를 고치려 들어서, **같은 실수가 반복**된다.
2. 왜 같은 실수가 반복되는가? → 고치는 데만 집중하고, **원인 분석·재발 방지를 건너뛰기** 때문이다.
3. 왜 원인 분석과 재발 방지를 건너뛰는가? → "빨리 고치자"는 압박 속에서 **체계적 절차가 없으면 자연스럽게 생략**되기 때문이다.
4. 왜 체계적 절차가 없는가? → 개별 workflow는 있지만, **이것들을 언제·어떤 순서로 조합해야 하는지** 상위 파이프라인이 없었다.
5. 왜 상위 파이프라인이 없었는가? → **이슈의 생애주기(등록→분석→수정→검증→종료)를 하나의 흐름으로 묶는 관점**이 빠져 있었다.

> **근본 원인**: 개별 도구는 충분하지만, 이슈의 전체 생애주기를 관통하는 오케스트레이션이 없었다.

---

### 1. 이슈 등록

- 접수 즉시 이슈 문서를 생성한다. 분석 전에 **먼저 파일을 만든다**.
- 위치: `docs/1-project/0-issue/YYYY-MM-DD_<슬러그>.md`
- 형식:
  ```markdown
  # 🐛 [한줄 제목]
  > 등록일: YYYY-MM-DD
  > 상태: open
  > 심각도: P?

  ## 원문
  사용자가 말한 그대로. 한 글자도 바꾸지 않는다.

  ## 해석
  원문을 기술적으로 재해석한 내용.
  무엇이 기대 동작이고 무엇이 실제 동작인지 정리.

  ## 첫 감
  코드를 읽기 전에 떠오르는 첫 번째 가설.
  "이렇게 하면 되지 않을까?" 수준의 직감.
  변경 예상 파일이나 방향을 짧게 적는다.

  ## 관련 이슈
  `docs/1-project/0-issue/` 를 검색하여 유사 이슈가 있으면 링크.
  ```

### 2. Triage (심각도 분류)

- 이슈의 **영향 범위(blast radius)**를 판단하여 심각도를 부여한다.
  - `P0` — 빌드 불가 / 전체 라우트 영향
  - `P1` — 특정 기능 완전 동작 불가
  - `P2` — 부분적 이상, 대안 존재
  - `P3` — cosmetic / 개선사항
- 심각도에 따라 전략을 결정한다:
  - P0–P1 → `/diagnose` 없이 `/divide`로 바로 분해·수정 (긴급)
  - P2–P3 → `/diagnose`로 충분한 분석 후 진행

### 3. 분석 — `/diagnose` 실행

- 이슈와 관련된 테스트 또는 에러를 대상으로 `/diagnose`를 실행한다.
- 코드를 수정하지 않고 원인을 분석하고 삽질 일지를 작성한다.
- **Before 스냅샷**: 수정 전 테스트 결과(X fail / Y pass)를 기록한다.
- 삽질 일지의 "원인 추정"을 이슈 문서에 요약 링크한다.

#### Gate Check ①
- 원인 추정 확신도가 **중간 이상**인가?
  - ✅ → 다음 단계 진행
  - ❌ → 사용자에게 질문하여 추가 정보를 확보한다. 진행하지 않는다.

### 4. 분해 & 수정 — `/divide` 실행

- 진단 결과를 기반으로 `/divide`로 문제를 분해한다.
- 정답인 것은 단위 테스트로 증명 후 수정, 아닌 것은 사용자에게 질문.
- 분해 보고서를 작성한다.

#### Gate Check ②
- 수정한 부분의 단위 테스트가 **통과**하는가?
  - ✅ → 다음 단계 진행
  - ❌ → 수정 계속. 통과할 때까지 진행하지 않는다.

### 5. 코드 리뷰 — `/review` 실행

- 수정된 코드가 프로젝트 철학, 네이밍, 구조 규칙을 위반하지 않는지 확인한다.
- 위반 사항이 있으면 수정 후 재검증한다.

### 6. 검증 — `/fix` 실행

- Smoke test → Type check → Build 순서로 시스템 안정성을 확인한다.
- 수정으로 인한 사이드이펙트가 없는지 검증한다.

### 7. 테스트 보강 — `/test` 실행 (해당 시)

- 이슈와 관련된 컴포넌트에 대해 E2E 테스트를 생성/보강한다.
- 재현 시나리오를 regression test로 고정한다.

### 8. 재발 방지 — `/rules` 실행 (해당 시)

- 이슈의 근본 원인이 구조적/패턴적 문제인 경우, `.agent/rules.md`에 규칙을 추가한다.
- 예: "X를 import할 때는 반드시 Y facade를 사용할 것"

### 9. 학습 기록 — `/til` 실행 (해당 시)

- 이슈를 해결하면서 얻은 기술적 인사이트를 TIL로 기록한다.
- `/rules`가 "하지 마라"라면, `/til`은 "왜 그런지 이해했다"이다.

### 10. 이슈 종료 & 최종 리포트

- 이슈 문서의 상태를 `closed`로 변경한다.
- **After 스냅샷**과 함께 해결 요약을 추가한다:
  ```markdown
  ## 해결 요약
  - 원인: ...
  - 수정: ... (변경 파일 목록)
  - 검증: smoke ✅ / type ✅ / build ✅
  - Before → After: X fail → 0 fail
  - 테스트: [spec 경로] (N개 통과)
  - 리뷰: 위반 0건
  - 재발방지: [rules.md에 추가한 규칙 요약]
  - TIL: [til 경로]
  ```
- 사용자에게 최종 리포트를 보고한다.
