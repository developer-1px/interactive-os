---
description: 프로젝트 철학 준수 및 네이밍/구조 일관성을 코드 리뷰하여 위반 사항을 리포트한다
---

## 모드

| 모드 | 트리거 | 산출물 |
|------|--------|--------|
| **인라인** | 코드 작성 직후, 커밋 직전, 수렴이 필요할 때 | 인라인 보고. 위반 즉시 수정. |
| **보고서** | 명시적 `/review` 호출, `/project` Phase 4 | `docs/0-inbox/`에 보고서 저장 |

인라인 모드는 기존 `/reflect`의 역할. 수렴 루프로 새 발견이 0건이 될 때까지 반복한다.
보고서 모드는 정식 코드 리뷰. 파일에 저장하고 사용자에게 전달한다.

## 절차

1. **프로젝트 원칙 로드**
   - `.agent/rules.md`에서 프로젝트 원칙과 컨벤션을 읽는다.

2. **검사 대상 결정**
   - 사용자가 특정 파일/디렉토리를 지정하면 해당 범위만 검사한다.
   - 지정하지 않으면, **현재 대화에서 LLM이 수정·생성·언급한 파일들**을 대상으로 한다.
   - 대화 맥락이 없는 경우에만 fallback으로 `git diff --name-only HEAD~5`를 사용한다.

3. **수렴 루프** (새 발견 0건까지 반복)

   각 회차마다 체크리스트를 점검한다:

   ### 철학 준수 검사
   - **커맨드 원칙**: 모든 인터랙션 prop이 `BaseCommand` 브랜드 타입인가?
   - **커널 상태 원칙**: 커널 state 대신 로컬 state나 Zustand를 직접 쓴 곳이 없는가?
   - **표준 인터페이스 원칙**: ARIA role/attribute, HTML 시맨틱, 커맨드 패턴 표준 준수.
   - **100% Type-Strict**: `as any` 우회 없는가? 브랜드 타입이 지켜지는가?
   - **100% Declarative**: 명령형 코드가 선언형으로 대체 가능한 곳에 쓰이지 않았는가?
   - **로깅 원칙**: `console.log` 대신 `logger` 사용

   ### 코드 품질 검사
   - 기존 코드를 복붙하지 않고 원칙에 맞게 작성했는가?
   - 레거시 패턴(deprecated API, 구식 컨벤션)을 따라가지 않았는가?
   - 불필요한 추상화나 과잉 설계가 없는가?
   - Known 해법이 있는데 "나중에"로 미룬 것이 없는가?

   ### 네이밍/구조 검사
   - **파일명**: 번호 prefix 컨벤션 준수
   - **컴포넌트명**: PascalCase, 역할이 이름에 드러나는가
   - **커맨드명**: UPPER_SNAKE_CASE, 동사+목적어 패턴
   - **import 경로**: alias 사용, 상대 경로 깊이 3 이상 금지

   **탈출 조건**: 해당 회차에서 새 발견이 0건이면 루프 종료.

4. **위반 발견 시**
   - **인라인 모드**: 즉시 수정. `[N회차] 발견 M건: ...` 보고.
   - **보고서 모드**: 심각도 × 의도 2축 분류로 기록.
     - 심각도: 🔴 철학 위반 / 🟡 네이밍/구조 / 🔵 개선 제안
     - 의도: `[Blocker]` `[Suggest]` `[Question]` `[Nitpick]` `[Praise]`

5. **완료**
   - **인라인**: `✅ review 통과 (N회차, 총 M건 수정)` 한 줄 보고.
   - **보고서**: `docs/0-inbox/YYYY-MMDD-HHmm-[report]-code-review.md`에 저장. 🔴 항목이 있으면 즉시 수정 여부를 묻는다.
