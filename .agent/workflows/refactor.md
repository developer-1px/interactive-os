---
description: íŒ¨í„´ Aë¥¼ íŒ¨í„´ Bë¡œ ì „í™˜í•˜ëŠ” ë¦¬íŒ©í† ë§ íŒŒì´í”„ë¼ì¸. ëŒ€ìƒ ì‹ë³„ë¶€í„° ì¬ë°œ ë°©ì§€ê¹Œì§€.
---

// turbo-all

## /refactor â€” Green í›„ ì •ë¦¬ + ê²€ì¦ + ì»¤ë°‹

> **ì‚°ì¶œë¬¼**: ì •ë¦¬ëœ ì½”ë“œ + git commit
> **ì „ì œ**: í…ŒìŠ¤íŠ¸ê°€ ğŸŸ¢ PASS ìƒíƒœì—¬ì•¼ í•œë‹¤.
> **ì›ì¹™**: í…ŒìŠ¤íŠ¸ë¥¼ ê¹¨ëœ¨ë¦¬ì§€ ì•Šìœ¼ë©´ì„œ ì½”ë“œë¥¼ ë‹¤ë“¬ëŠ”ë‹¤. í…ŒìŠ¤íŠ¸ê°€ ê¹¨ì§€ë©´ ë¦¬íŒ©í„°ê°€ ì˜ëª»ëœ ê²ƒì´ë‹¤.

---

### Step 0: REFACTORBOOK ìˆ™ì§€

`.agent/knowledge/refactor.md`ë¥¼ ì½ëŠ”ë‹¤.
- Â§1 ë¦¬íŒ©í† ë§ ì›ì¹™
- Â§2 ìì£¼ í•˜ëŠ” ì‹¤ìˆ˜
- Â§3 ì„ ë¡€

### Step 1: ì½”ë“œ ì •ë¦¬

- ì¤‘ë³µ ì œê±°, íŒ¨í„´ ì¼ë°˜í™”
- ë¶ˆí•„ìš”í•œ ì½”ë“œ ì‚­ì œ
- ë„¤ì´ë° ê°œì„ 
- **í…ŒìŠ¤íŠ¸ëŠ” ìˆ˜ì •í•˜ì§€ ì•ŠëŠ”ë‹¤** (Green ìƒíƒœ ìœ ì§€)

### Step 2: ë°©í–¥ ì ê²€ â†’ `/reflect` ì‹¤í–‰

`/reflect` ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•œë‹¤.

- ì´ë²ˆ êµ¬í˜„ì´ ì˜ë„ì™€ ë§ëŠ”ì§€ í™•ì¸í•œë‹¤.
- ì‹œìŠ¤í…œì— ìƒˆë¡œìš´ ìœ ì¼í•œ íŒ¨í„´ì„ ì¶”ê°€í–ˆëŠ”ê°€? â†’ ì¶”ê°€í–ˆìœ¼ë©´ ë³´ê³  (rules.md #1)
- OS íŒ¨í„´ì„ ë”°ëëŠ”ê°€? (useState/onClick/useEffect = 0ì¤„)
- âŒ ì‹¤íŒ¨ â†’ ë³´ê³ í•˜ê³  ë©ˆì¶˜ë‹¤.

### Step 3: OS ê³„ì•½ ê°ì‚¬ â†’ `/audit` ì‹¤í–‰

`/audit` ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•œë‹¤.

- ëŒ€ìƒ: ì´ë²ˆ ë¦¬íŒ©í† ë§ì—ì„œ ìˆ˜ì •í•œ íŒŒì¼/ì•±.
- ğŸ”´ LLM ì‹¤ìˆ˜ê°€ ë°œê²¬ë˜ë©´ â†’ Step 1ë¡œ ëŒì•„ê°€ ì¦‰ì‹œ ìˆ˜ì •.
- ğŸŸ¡ OS ê°­ â†’ BOARD íƒœìŠ¤í¬ë¡œ ê¸°ë¡.
- âšª ì •ë‹¹í•œ ì˜ˆì™¸ â†’ ì‚¬ìœ  ê¸°ë¡.

### Step 4: ì˜ì‹¬ â†’ `/doubt` ì‹¤í–‰

`/doubt` ì›Œí¬í”Œë¡œìš°ë¥¼ ì‹¤í–‰í•œë‹¤.

- ë¶ˆí•„ìš”í•œ ê²ƒì´ ìˆëŠ”ê°€? ì¤„ì¼ ìˆ˜ ìˆëŠ”ê°€?
- Occam Gate: ìƒˆ ê°œë…ì„ ë„ì…í–ˆìœ¼ë©´ ì •ë‹¹ì„± ê²€ì¦.
- ğŸ”´ ì œê±°/ğŸŸ¡ ì¶•ì†Œ ë°œìƒ ì‹œ â†’ Step 1ë¡œ ëŒì•„ê°„ë‹¤.

### Step 5: ê²€ì¦ (verify ì¸ë¼ì¸)

```bash
source ~/.nvm/nvm.sh && nvm use && npx tsc --noEmit
```
- 0 errors â†’ ë‹¤ìŒ
- errors â†’ ë³´ê³ í•˜ê³  ë©ˆì¶˜ë‹¤

```bash
source ~/.nvm/nvm.sh && nvm use && npx biome check --write
```

```bash
source ~/.nvm/nvm.sh && nvm use && npx vitest run 2>&1 | tail -10
```
- all pass â†’ ë‹¤ìŒ
- fail â†’ ë³´ê³ í•˜ê³  ë©ˆì¶˜ë‹¤

```bash
source ~/.nvm/nvm.sh && nvm use && npx vite build 2>&1 | tail -10
```
- success â†’ ë‹¤ìŒ
- fail â†’ ë³´ê³ í•˜ê³  ë©ˆì¶˜ë‹¤

### Step 6: ì»¤ë°‹

ê²€ì¦ ê²°ê³¼ ë³´ê³ :

```
| Gate  | Result |
|-------|--------|
| tsc   | âœ… / âŒ |
| lint  | âœ… / âŒ |
| unit  | âœ… N passed / âŒ |
| build | âœ… / âŒ |
```

ëª¨ë“  Gate í†µê³¼ ì‹œ ì»¤ë°‹ì„ ì œì•ˆí•œë‹¤.

### Step 7: BOARD.md ê°±ì‹ 

- Doneì— íƒœìŠ¤í¬ ì´ë™ + ì¦ë¹™ ê¸°ë¡
- ë‹¤ìŒ íƒœìŠ¤í¬ê°€ ìˆìœ¼ë©´ ì•Œë ¤ì¤€ë‹¤: "ë‹¤ìŒ: `/red`ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”"

### ì™„ë£Œ ê¸°ì¤€

- [ ] ì½”ë“œ ì •ë¦¬ ì™„ë£Œ
- [ ] `/reflect` í†µê³¼
- [ ] `/audit` ì™„ë£Œ (ğŸ”´ 0ê±´ ë˜ëŠ” ìˆ˜ì • ì™„ë£Œ)
- [ ] `/doubt` ìˆ˜ë ´
- [ ] tsc 0 errors
- [ ] vitest all pass
- [ ] vite build success
- [ ] git commit ì™„ë£Œ
- [ ] BOARD.md ê°±ì‹ 
