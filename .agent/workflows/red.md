---
description: μ‹¤ν¨ν•λ” ν…μ¤νΈλ¥Ό μ‘μ„±ν•λ‹¤. μ΄ μ„Έμ…μ μ μΌν• μ‚°μ¶λ¬Όμ€ π”΄ FAILν•λ” .test.ts νμΌμ΄λ‹¤.
---

// turbo-all

## /red β€” μ‹¤ν¨ν•λ” ν…μ¤νΈ μ‘μ„±

> **μ‚°μ¶λ¬Ό 1κ°**: ν…μ¤νΈ μ½”λ“ `.test.ts` (π”΄ FAIL)
> **κΈμ§€**: κµ¬ν„ μ½”λ“ μ‘μ„±. μ΄ μ„Έμ…μ—μ„ `src/` ν”„λ΅λ•μ… μ½”λ“λ¥Ό μμ •ν•μ§€ μ•λ”λ‹¤.
> **μ›μΉ™**: ν…μ¤νΈκ°€ μ¤ν™μ΄λ‹¤. κµ¬ν„ λ°©λ²•μ„ λ¨λ¥΄λ” μƒνƒμ—μ„ **κΈ°λ€ λ™μ‘λ§** κΈ°μ ν•λ‹¤.
> **μμ™Έ**: μ•„ν‚¤ν…μ²/λ¦¬ν©ν† λ§ νƒμ¤ν¬(μΈν„°λ™μ…μ΄ μ•„λ‹ κ²ƒ)λ” Decision Table μ—†μ΄ Given-When-Then λ‹¨μ„ ν…μ¤νΈλ΅ μ§ν–‰ν•λ‹¤.

---

### Step 0: REDBOOK μ«μ§€ + λ§¥λ½ νμ•…

`.agent/knowledge/red.md`λ¥Ό μ½λ”λ‹¤.
- Β§1 ν—¤λ“λ¦¬μ¤ ν…μ¤νΈ ν¨ν„΄
- Β§2 ν•¨μ • (μ«“μ•λ κ²ƒ)
- Β§3 μ„ λ΅€

Then:

1. ν”„λ΅μ νΈ `BOARD.md`λ¥Ό μ½λ”λ‹¤.
2. Now νƒμ¤ν¬ μ¤‘ Red ν…μ¤νΈκ°€ μ—†λ” νƒμ¤ν¬λ¥Ό μ°Ύλ”λ‹¤.
3. ν•΄λ‹Ή νƒμ¤ν¬μ κΈ°λ€ λ™μ‘μ„ μ΄ν•΄ν•λ‹¤.

### Step 1: spec.md ν™•μΈ (Gate)

> **ASIS**: Decision Tableμ„ `/red`μ—μ„ μ§μ ‘ μ‘μ„±.
> **TOBE**: Decision Tableμ€ `/spec`μ—μ„ μ‘μ„± μ™„λ£. `/red`λ” **ν™•μΈλ§**.

- spec.md μ΅΄μ¬ + Decision Table μμ β†’ **Step 2λ΅ μ§„ν–‰**
- spec.md μ—†μ β†’ β›” **`/spec` μ‹¤ν–‰ μ§€μ‹. `/red` μ¤‘λ‹¨.**

---

### Step 2: ν…μ¤νΈ μ½”λ“ μ‘μ„±

> β οΈ **κ°•μ  ν¨ν„΄**: λ¨λ“  ν…μ¤νΈλ” μ•„λ κµ¬μ΅°λ¥Ό λ”°λ¥Έλ‹¤.

```ts
import { createOsPage, type OsPage } from "@os/createOsPage";

describe("Feature: [νƒμ¤ν¬λ…]", () => {
  let page: OsPage;

  beforeEach(() => {
    container = buildTestDOM();
    page = createOsPage();
    page.goto(ZONE_ID, { items, config, onAction, ... });
  });

  // κ²°μ • ν…μ΄λΈ”μ κ° ν–‰ β†’ it() 1κ°

  it("#N [λ¬Όλ¦¬μ μ…λ ¥] at [OSμ΅°κ±΄+Appμ΅°κ±΄] β†’ [κ²°κ³Ό]", () => {
    // Given
    page.dispatch(page.OS_FOCUS({ zoneId, itemId: "s1" }));

    // When β€” λ¬Όλ¦¬μ  μ…λ ¥λ§
    page.keyboard.press("Enter");

    // Then β€” κ΄€μ°° κ°€λ¥ν• κ²°κ³Όλ§
    expect(page.focusedItemId()).toBe("g1");
  });
});
```

**κΈμ§€ λ©λ΅**:
- β λ‚΄λ¶€ ν•¨μ μ§μ ‘ νΈμ¶ (`Keybindings.resolve()`, `createDrillDown()`, `resolveMouse()`)
- β `node:fs`, λ™μ  `import()`λ΅ λ¨λ“ μ΅΄μ¬ ν…μ¤νΈ
- β μ»¤λ§¨λ“ ν©ν† λ¦¬ μ§μ ‘ νΈμ¶ ν›„ λ°ν™κ°’ κ²€μ‚¬
- β… `page.keyboard.press()` β†’ `page.focusedItemId()` / `page.osState` / `page.computeAttrs()`

### Step 3: π”΄ FAIL ν™•μΈ

```bash
source ~/.nvm/nvm.sh && nvm use && npx vitest run --reporter=verbose [ν…μ¤νΈνμΌκ²½λ΅] 2>&1 | tail -30
```

- π”΄ FAIL ν™•μΈ β†’ μ™„λ£.
- FAIL μ‚¬μ κ°€ "λ―Έκµ¬ν„"μ΄μ§€ "ν…μ¤νΈ μ¤λ¥"κ°€ μ•„λ‹μ§€ ν™•μΈν•λ‹¤.
- ν…μ¤νΈ μμ²΄κ°€ κΉ¨μ§€λ©΄ (import μ—λ¬ λ“±) ν…μ¤νΈ μ½”λ“λ§ μμ •ν•λ‹¤.
- **FAIL ν™•μΈ ν›„**: κ²°μ • ν…μ΄λΈ”μ ν•΄λ‹Ή ν–‰ S μ—΄μ„ `β¬` β†’ `π”΄`λ΅ μ—…λ°μ΄νΈν•λ‹¤.
- **`/green` μ™„λ£ ν›„**: S μ—΄μ„ `π”΄` β†’ `πΆ`λ΅ μ—…λ°μ΄νΈν•λ‹¤.

### μ™„λ£ κΈ°μ¤€

- [ ] spec.md μ΅΄μ¬ ν™•μΈ (Gate ν†µκ³Ό)
- [ ] spec.mdμ Decision Table ν–‰ μ = ν…μ¤νΈ `it()` μ μΌμΉ (μΈν„°λ™μ… νƒμ¤ν¬)
- [ ] `.test.ts` νμΌ μ΅΄μ¬
- [ ] ν…μ¤νΈκ°€ Full Path ν¨ν„΄ μ‚¬μ© (λ¬Όλ¦¬μ  μ…λ ¥ β†’ κ΄€μ°°)
- [ ] `vitest run` β†’ π”΄ FAIL
- [ ] FAIL μ‚¬μ  = λ―Έκµ¬ν„ (ν…μ¤νΈ μ¤λ¥ μ•„λ‹)
- [ ] ν”„λ΅λ•μ… μ½”λ“ μμ • 0μ¤„

---

### λ§μ§€λ§‰ Step: REDBOOK κ°±μ‹ 

μƒλ΅ λ°κ²¬λ μ§€μ‹μ΄ μμΌλ©΄ `.agent/knowledge/red.md`λ¥Ό κ°±μ‹ ν•λ‹¤.
- μ μ‘λ™ν• ν…μ¤νΈ ν¨ν„΄ β†’ Β§1
- λ°λ³µλ ν•¨μ • β†’ Β§2
- μ„ λ΅€ β†’ Β§3

> μƒ μ§€μ‹ μ—†μΌλ©΄ μ¤ν‚µ.
