# AUDITBOOK â€” OS ê°ì‚¬ ì§€ì‹ë² ì´ìŠ¤

> `/audit` ì‹œì‘ ì‹œ ë°˜ë“œì‹œ ì½ëŠ”ë‹¤.
> ê°ì‚¬ ê¸°ì¤€, ì•Œë ¤ì§„ OS ê°­, ì •ë‹¹í•œ ì˜ˆì™¸ë¥¼ ì¶•ì í•˜ì—¬ ì¬ë…¼ìŸì„ ë°©ì§€í•œë‹¤.
> ìƒˆ íŒì •ì´ ìƒê¸°ë©´ `/audit` ì¢…ë£Œ ì‹œ ì´ íŒŒì¼ì„ ê°±ì‹ í•œë‹¤.

---

## 1. ë°˜ë“œì‹œ ì¨ì•¼ í•˜ëŠ” OS íŒ¨í„´

> ì´ íŒ¨í„´ì´ ìˆëŠ”ë° Appì´ ì§ì ‘ êµ¬í˜„í–ˆìœ¼ë©´ â†’ ì¦‰ì‹œ **ğŸ”´ LLM ì‹¤ìˆ˜**.

### 1-A. ì•±â†’OS (ê¸°ì¡´)

| íŒ¨í„´ | OS API | ì˜ëª»ëœ ì˜ˆ |
|------|--------|-----------|
| ìƒíƒœ ê´€ë¦¬ | `BuilderApp.useComputed()`, `os.getState()` | `useState` |
| ì»¤ë§¨ë“œ dispatch | `os.dispatch(command())` | ì§ì ‘ state mutate |
| ëª©ë¡ í¬ì»¤ìŠ¤/ë„¤ë¹„ê²Œì´ì…˜ | Zone `bind({ role: "tree"/"grid" })` | `onKeyDown` arrow key |
| ì•„ì´í…œ ì„ íƒ | Zone `onAction`, `onActivate` | `onClick` ì§ì ‘ state ë³€ê²½ |
| í•„ë“œ í¸ì§‘ | `Field.Editable`, `OS_FIELD_COMMIT` | `<input onChange>` |
| Undo/Redo | `createUndoRedoCommands` | ë³„ë„ history stack |

### 1-B. OS ë‚´ë¶€ ê³„ì•½ (OSâ†”OS)

> OS í”„ë¦¬ë¯¸í‹°ë¸Œ ê°„ì˜ ì¼ê´€ì„±. ìœ„ë°˜ ì‹œ **ğŸŸ¡ OS ê°­**.

| íŒ¨í„´ | ì˜¬ë°”ë¥¸ ì˜ˆ | ì˜ëª»ëœ ì˜ˆ |
|------|----------|----------|
| Zone ì½œë°± ì‹œê·¸ë‹ˆì²˜ | `(info) => BaseCommand \| BaseCommand[]` (ì„ ì–¸í˜•) | `(info) => void` (ëª…ë ¹í˜•) |
| Listener ê²©ë¦¬ | í•˜ë‚˜ì˜ ë¬¼ë¦¬ ì œìŠ¤ì²˜ â†’ í•˜ë‚˜ì˜ Listener | ê°™ì€ pointerdownì„ Mouse+Drag ê°ê° ì²˜ë¦¬ |
| DOM convention ìë™í™” | OSê°€ `data-*` ì†ì„± ìë™ ì£¼ì… | ì•±ì´ `data-drag-handle` ìˆ˜ë™ ë¶€ì°© |

### 1-C. OSâ†”ì•± ê³„ì•½ ì™„ì „ì„±

> bind() ì—°ê²°ì´ ì‹¤ì œë¡œ ë™ì‘í•˜ëŠ”ê°€. ìœ„ë°˜ ì‹œ **ğŸ”´ LLM ì‹¤ìˆ˜** ë˜ëŠ” **ğŸŸ¡ OS ê°­**.

| ê²€ì‚¬ í•­ëª© | ë°©ë²• |
|----------|------|
| bind()ì—ì„œ í˜¸ì¶œí•˜ëŠ” ë©”ì†Œë“œê°€ ì¡´ì¬í•˜ëŠ”ê°€ | tsc + ìˆ˜ë™ í™•ì¸ |
| ì•±ì´ `os.dispatch`ë¥¼ onReorder ë“± ì½œë°± ì•ˆì—ì„œ ì§ì ‘ í˜¸ì¶œí•˜ëŠ”ê°€ | grep â†’ ìˆìœ¼ë©´ OS gap |
| ì½œë°±ì—ì„œ ë¦¬í„´í•œ ì»¤ë§¨ë“œë¥¼ OSê°€ ì‹¤ì œë¡œ dispatchí•˜ëŠ”ê°€ | OS command ì½”ë“œ í™•ì¸ |

---

## 2. ì•Œë ¤ì§„ OS ê°­

> ì•„ì§ OSì— ì—†ëŠ” ê²ƒ. ë°œê²¬ë˜ì–´ë„ ğŸ”´ê°€ ì•„ë‹ˆë¼ ğŸŸ¡. `5-backlog/os-gaps.md` ì°¸ì¡°.

| ID | íŒ¨í„´ | ìƒíƒœ | ë°œê²¬ì¼ |
|----|------|------|--------|
| OG-001 | Dropdown (listbox) Zone â€” ì—´ê¸°/ë‹«ê¸°/Escape/Arrow/backdrop í†µí•© | âœ… í•´ê²° (dropdown-dismiss: Trigger+Portal íŒ¨í„´. ìƒˆ í”„ë¦¬ë¯¸í‹°ë¸Œ ë¶ˆí•„ìš”) | 2026-02-25 |
| OG-002 | `onReorder: void` â€” ëª…ë ¹í˜• ì‹œê·¸ë‹ˆì²˜. ë‹¤ë¥¸ ì½œë°±ì€ ì„ ì–¸í˜•(BaseCommand ë¦¬í„´) | âœ… í•´ê²° | 2026-02-26 |
| OG-003 | MouseListener + DragListener ì¶©ëŒ â€” ê°™ì€ ë¬¼ë¦¬ ì œìŠ¤ì²˜ë¥¼ ê²½ìŸ ì²˜ë¦¬ | âœ… í•´ê²° (unified-pointer-listener) | 2026-02-26 |
| OG-004 | `data-drag-handle` DOM convention â€” OSê°€ ìë™ ì£¼ì…í•˜ì§€ ì•ŠìŒ. ì•±ì´ ìˆ˜ë™ ë¶€ì°© | ğŸŸ¡ ë¯¸í•´ê²° | 2026-02-26 |
| OG-005 | ì»¤ì„œ ë©”íƒ€ ë“±ë¡ â€” ì•±ì´ useEffectë¡œ ìˆ˜ë™ mount/unmount ë™ê¸°í™”. OS ë¯¸ë“¤ì›¨ì–´/ZoneRegistry í™•ì¥ í•„ìš” | ğŸŸ¡ ë¯¸í•´ê²° | 2026-02-26 |
| OG-006 | drag cursor/userSelect â€” PointerListenerê°€ document.body.style ì§ì ‘ ì¡°ì‘. OSê°€ drag ìƒíƒœì— ë”°ë¼ ìë™ ê´€ë¦¬í•´ì•¼ | ğŸŸ¡ ë¯¸í•´ê²° | 2026-02-26 |
| OG-007 | zone element lookup â€” Listenerê°€ `document.querySelector("[data-zone=...]")`ë¡œ zone DOM íƒìƒ‰. ZoneRegistryì— element ref ì œê³µ í•„ìš” | ğŸŸ¡ ë¯¸í•´ê²° | 2026-02-26 |

> **ì£¼ì˜**: OG-001 ê´€ë ¨ íŒ¨í„´(ë“œë¡­ë‹¤ìš´ onClick)ì€ OS ê°­ì´ë¯€ë¡œ ğŸ”´ë¡œ ë¶„ë¥˜í•˜ì§€ ì•ŠëŠ”ë‹¤.
> **ì£¼ì˜**: OG-003, OG-004 ê´€ë ¨ íŒ¨í„´ì€ OS ê°­ì´ë¯€ë¡œ ğŸ”´ë¡œ ë¶„ë¥˜í•˜ì§€ ì•ŠëŠ”ë‹¤.
> **ì£¼ì˜**: OG-006, OG-007 ê´€ë ¨ íŒ¨í„´ì€ OS ê°­ì´ë¯€ë¡œ ğŸ”´ë¡œ ë¶„ë¥˜í•˜ì§€ ì•ŠëŠ”ë‹¤.

---

## 3. ì•Œë ¤ì§„ ì •ë‹¹í•œ ì˜ˆì™¸

> OSê°€ ëŒ€ì²´í•  ìˆ˜ ì—†ëŠ” ê²ƒ. ë°œê²¬ë˜ì–´ë„ ë¬´ì‹œ. âšª.

| íŒ¨í„´ | ì´ìœ  | ì˜ˆì‹œ |
|------|------|------|
| `window.addEventListener` (OS ì§„ì…ì ) | OS ì»¤ë„ì´ ë¸Œë¼ìš°ì € ì´ë²¤íŠ¸ë¥¼ ë°›ëŠ” ìœ ì¼í•œ ì§„ì…ì  | `src/os/kernel.ts` |
| ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ref/callback | ì¨ë“œíŒŒí‹° API ìš”êµ¬ì‚¬í•­ | leaflet, chart.js ë“± |
| `document.getElementById` (í¬ì»¤ìŠ¤ ë³µêµ¬) | ë¸Œë¼ìš°ì € í¬ì»¤ìŠ¤ API ì§ì ‘ í˜¸ì¶œ | ëª¨ë‹¬ dismiss í›„ ë³µêµ¬ |
| `document.caretRangeFromPoint` (caret seeding) | ë¸Œë¼ìš°ì € caret API ì§ì ‘ ì‚¬ìš© í•„ìˆ˜ | PointerListener seedCaretFromPoint |
| sense í•¨ìˆ˜ ë‚´ DOM ì½ê¸° | sense ì–´ëŒ‘í„°ì˜ ì •ë‹¹í•œ ì±…ì„ â€” DOMâ†’ìˆœìˆ˜ë°ì´í„° ë³€í™˜ | `senseMouse.ts` querySelector, getElementById |

---

## 4. ê·¼ë³¸ ì›ì¸ ì§„ë‹¨í‘œ

> ğŸ”´ LLM ì‹¤ìˆ˜ ë°œê²¬ ì‹œ, ì–´ëŠ íŒŒì´í”„ë¼ì¸ ë‹¨ê³„ë¡œ ë£¨í”„ë°±í• ì§€ íŒë‹¨.

| ê·¼ë³¸ ì›ì¸ | íŒì • ê¸°ì¤€ | ë£¨í”„ë°± |
|----------|----------|--------|
| Story / DT ì˜ëª»ë¨ | DTì— ì—†ëŠ” ì»¤ë§¨ë“œë¥¼ êµ¬í˜„í–ˆê±°ë‚˜, DT ìì²´ê°€ OS ë¶ˆê°€ëŠ¥ êµ¬ì¡° | â†’ `/stories` |
| Spec Scenario ì˜ëª»ë¨ | DTë¥¼ ì˜ëª» ë²ˆì—­í•˜ì—¬ BDDê°€ OS íŒ¨í„´ê³¼ ì–´ê¸‹ë‚¨ | â†’ `/spec` |
| Red í…ŒìŠ¤íŠ¸ ì˜ëª»ë¨ | í…ŒìŠ¤íŠ¸ê°€ DOM/ì´ë²¤íŠ¸ë¥¼ ì§ì ‘ ê²€ì¦ (OS Hook ë¯¸ì‚¬ìš©) | â†’ `/red` |
| Bind ì˜ëª»ë¨ | OS Hook/Commandê°€ ìˆëŠ”ë° raw HTML ì´ë²¤íŠ¸ ì‚¬ìš© | â†’ `/bind` |

---

## 5. íŒì • ì„ ë¡€

> ê³¼ê±° ê°ì‚¬ì—ì„œ ë‚´ë¦° ë¶„ë¥˜ ê²°ì •. ê°™ì€ íŒ¨í„´ì´ ë‚˜ì˜¤ë©´ ì¬ë…¼ìŸ ì—†ì´ ë™ì¼ ì ìš©.

| ì„ ë¡€ | íŒ¨í„´ | íŒì • | ì´ìœ  | ë‚ ì§œ |
|------|------|------|------|------|
| LocaleSwitcher onClick 4ê±´ | ë“œë¡­ë‹¤ìš´ ë‚´ë¶€ onClick | ğŸŸ¡ OS ê°­ (OG-001) | Dropdown Zone í”„ë¦¬ë¯¸í‹°ë¸Œ ë¶€ì¬. LLM ì‹¤ìˆ˜ê°€ ì•„ë‹˜ | 2026-02-25 |
| BuilderTabs useState | íƒ­ í™œì„± ìƒíƒœ useState | ğŸŸ¡ OS ê°­ (T5) | tablist Zoneì˜ activateâ†’state ê²½ë¡œ ë¯¸êµ¬í˜„ | 2026-02-25 |
| DnD onReorder void | zone ì½œë°± ëª…ë ¹í˜• ì‹œê·¸ë‹ˆì²˜ | ğŸŸ¡ OS ê°­ (OG-002) â†’ âœ… ìˆ˜ì • | void ì½œë°±ì€ ì•±ì´ os.dispatch ì§ì ‘ í˜¸ì¶œ ê°•ì œ. ì„ ì–¸í˜•ìœ¼ë¡œ ìˆ˜ì • | 2026-02-26 |
| DnD BuilderApp.dispatch | ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë©”ì†Œë“œ í˜¸ì¶œ | ğŸ”´ LLM ì‹¤ìˆ˜ (OG-002 ê¸°ì¸) | OS gapì´ LLM ì‹¤ìˆ˜ë¥¼ ìœ ë°œí•œ ì‚¬ë¡€ | 2026-02-26 |
| DnD e.preventDefault ì¶©ëŒ | Listener ê°„ side-effect | ğŸŸ¡ OS ê°­ (OG-003) | Mouse+Drag ë¶„ë¦¬ êµ¬ì¡°ì˜ í•œê³„ | 2026-02-26 |
| DragListener.tsx dead code | ì‚­ì œ ëˆ„ë½ | ğŸ”´ LLM ì‹¤ìˆ˜ | PointerListener ëŒ€ì²´ í›„ T6ì—ì„œ MouseListenerë§Œ ì‚­ì œ, DragListener ëˆ„ë½ | 2026-02-26 |
| PointerListener body.style | drag cursor/userSelect ì§ì ‘ ì¡°ì‘ | ğŸŸ¡ OS ê°­ (OG-006) | OSê°€ drag ìƒíƒœë¥¼ ì‹œê°í™”í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ ë¶€ì¬ | 2026-02-26 |
| PointerListener querySelector("[data-zone]") | zone element DOM íƒìƒ‰ | ğŸŸ¡ OS ê°­ (OG-007) | ZoneRegistryì— element ref API ë¶€ì¬ | 2026-02-26 |

---

## ê°±ì‹  ë°©ë²•

`/audit` ì¢…ë£Œ ì‹œ:
1. **ìƒˆ OS ê°­** ë°œê²¬ â†’ Â§2ì— ì¶”ê°€ + `5-backlog/os-gaps.md`ì— ë“±ë¡
2. **ìƒˆ ì •ë‹¹í•œ ì˜ˆì™¸** í™•ì¸ â†’ Â§3ì— ì¶”ê°€
3. **ìƒˆ íŒì • ì„ ë¡€** ìƒì„± â†’ Â§5ì— ì¶”ê°€
4. **OS ê°­ í•´ê²°ë¨** â†’ Â§2 í•­ëª© `âœ… í•´ê²°`ë¡œ ì²´í¬ + `os-gaps.md` ì—…ë°ì´íŠ¸
