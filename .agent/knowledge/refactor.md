# REFACTORBOOK — 리팩토링 지식베이스

> `/refactor` 시작 시 읽는다. 종료 시 새 지식이 있으면 갱신한다.
> 반복되는 리팩토링 패턴과 역방향(실수) 패턴을 축적한다.

---

## 1. 알려진 좋은 패턴

| 패턴 | 설명 | 발견일 |
|------|------|--------|
| **레이어 분리** | 순수함수(entity) → OS 커맨드(app) → UI 컴포넌트. 역방향 import 금지 | 2026-02-25 |
| **import 위치** | `import`는 파일 최상단. 함수 중간 import는 코드 스멜 | 2026-02-25 |
| **일괄 교체** | 같은 패턴의 수정은 sed/grep으로 일괄. 파일별 수작업 금지 | 2026-02-25 |

## 2. 알려진 함정

| 함정 | 결과 | 대응 |
|------|------|------|
| **함수 중간 import** | `useLocalizedSectionFields` 내부에서 import → 코드 스멜 | 파일 최상단으로 이동 |
| **sed -i 옵션** | macOS sed는 `-i ''` 필요. `-i`만 쓰면 에러 | `sed -i '' 's/...'` |

---

## 갱신 방법
`/refactor` 세션 종료 후 새 리팩토링 패턴/함정 발견 시 추가.
