# ë¹Œë”ì˜ í‚¤ë³´ë“œ í¬ì»¤ìŠ¤ ì´ë™ ì •ì±…

> Discussion 2026-02-19 19:29â€“19:54 (25min)

---

## Journey

**ğŸ§‘ ì‚¬ìš©ì**: ë¹Œë”ì˜ í‚¤ë³´ë“œ í¬ì»¤ìŠ¤ ì´ë™ ì •ì±…ì— ê´€í•˜ì—¬ ë…¼ì˜í•˜ì.

**ğŸ¤– AI**: í˜„ì¬ ë¹Œë”ì˜ í¬ì»¤ìŠ¤ êµ¬ì¡°ë¥¼ íŒŒì•…. `builder-canvas` ë‹¨ì¼ Zoneì— corner strategy, Tab trap. ë¸”ë¡ë“¤ì€ Zone ì•„ë‹Œ flatí•œ Itemë“¤ì˜ ì§‘í•©.

---

**ğŸ§‘ ì‚¬ìš©ì**: ë¹Œë”ëŠ” section â†’ block â†’ item(field, icon, img) ê³„ì¸µ êµ¬ì¡°ì¸ë°, ë§ˆìš°ìŠ¤ëŠ” 3ê³„ì¸µ ëª¨ë‘ ì„ íƒ ê°€ëŠ¥í•˜ì§€ë§Œ í‚¤ë³´ë“œëŠ” itemë§Œ ìˆœíšŒí•œë‹¤. ê°œì„ ì´ í•„ìš”í•˜ë‹¤.

**ğŸ¤– AI**: ì½”ë“œ í™•ì¸ â€” `Builder.Section`/`Builder.Group`ì— `data-nav-skip="true"`ê°€ ë¶™ì–´ í‚¤ë³´ë“œ ìˆœíšŒì—ì„œ ì œì™¸ë¨. ì„¸ ê³„ì¸µ ëª¨ë‘ `OSItem`ì´ë¼ ë§ˆìš°ìŠ¤ëŠ” ê°€ëŠ¥. **input modality ë¹„ëŒ€ì¹­** í™•ì¸. í•´ê²° ëª¨ë¸ë¡œ Figma-style(Escape-to-Parent), Focus Level Toggle, Breadcrumb ë“± ì œì‹œ.

---

**ğŸ§‘ ì‚¬ìš©ì**: ARIAì— ì—†ëŠ” custom ë°©ì‹ì´ë¯€ë¡œ, OSê°€ customì„ í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” í™•ì¥ í¬ì¸íŠ¸ê°€ í•„ìš”í•˜ë‹¤.

**ğŸ¤– AI**: í˜„ì¬ OS ë‚´ë¹„ê²Œì´ì…˜ íŒŒì´í”„ë¼ì¸ì— ì•±ì´ ê°œì…í•  í™•ì¥ í¬ì¸íŠ¸ê°€ ì—†ìŒ í™•ì¸. Dynamic Item Filter, Custom Command Injection, Navigation Strategy Extension 3ê°€ì§€ ë°©í–¥ ì œì‹œ. `registerNavigationStrategy`ëŠ” ì´ë¯¸ ì—´ë ¤ ìˆìœ¼ë‚˜ ì•„ì´í…œ ëª©ë¡ ìì²´ì˜ í•„í„°ë§ì—ëŠ” ê°œì… ë¶ˆê°€.

---

**ğŸ§‘ ì‚¬ìš©ì**: ë‚´ê°€ ì›í•˜ëŠ” ëª¨ë¸: í‚¤ë³´ë“œ ìˆœíšŒëŠ” ê°™ì€ ë ˆë²¨ë¼ë¦¬, Enter=go child or edit, `\`=go to parent.

**ğŸ¤– AI**: ëª¨ë¸ êµ¬ì²´í™” â€” Arrow=ê°™ì€ ë ˆë²¨ í˜•ì œ ì´ë™, Enter=drill down(sectionâ†’groupâ†’itemâ†’edit), `\`=drill up. ì´ë¥¼ ìœ„í•´ í•„ìš”í•œ 3ê°€ì§€: â‘ ë™ì  ì•„ì´í…œ í•„í„° â‘¡Enter/`\` ê³„ì¸µ ì „í™˜ ë¡œì§ ë°”ì¸ë”© â‘¢í˜„ì¬ ë‚´ë¹„ê²Œì´ì…˜ ë ˆë²¨ ìƒíƒœ. `itemFilter` ì½œë°±ì„ Zone configì— ì¶”ê°€í•˜ëŠ” ë°©í–¥ ì œì•ˆ.

---

**ğŸ§‘ ì‚¬ìš©ì**: ìš°ë¦¬ê°€ focus itemì„ ì°¾ëŠ” ê±´ `defineContext`ì´ì§€. ì´ê±´ ì»¤ë„ì„ ì“°ëŠ” ë°©ì‹ì´ê³ .

**ğŸ¤– AI**: ë§ë‹¤ â€” `DOM_ITEMS`ëŠ” `kernel.defineContext("dom-items", provider)`ë¡œ ì •ì˜ë¨. ì´ë¯¸ ìˆëŠ” ë©”ì»¤ë‹ˆì¦˜ì´ì§€ë§Œ, `contextProviders`ê°€ ì „ì—­ Mapì´ë¼ ìŠ¤ì½”í”„ë³„ ì˜¤ë²„ë¼ì´ë“œê°€ ì•ˆ ë¨. ë¹Œë” ìŠ¤ì½”í”„ì—ì„œ ì¬ì •ì˜í•˜ê±°ë‚˜ ì»¨í…ìŠ¤íŠ¸ í•´ì„ì„ ìŠ¤ì½”í”„ë³„ë¡œ ë‹¬ë¦¬í•˜ëŠ” ë°©í–¥ ê²€í† .

---

**ğŸ§‘ ì‚¬ìš©ì**: ê¸°ì¡´ ì¶•ì„ ìµœëŒ€í•œ í™œìš©í•˜ëŠ” ë°©ì‹ì´ë¼ë©´ itemFilterê°€ ë‚˜ì˜ì§€ ì•Šë‹¤. ê¸°ì¡´ ë©”ì»¤ë‹ˆì¦˜ê³¼ ë°ì´í„° íë¦„ì€ ìœ ì§€í•˜ë˜ hookì„ ì œê³µí•˜ëŠ” ë°©ì‹.

**ğŸ¤– AI**: DOM_ITEMS provider ëì— `filter(items)` 3ì¤„ ì¶”ê°€ë¡œ êµ¬í˜„ ê°€ëŠ¥. OS ë³€ê²½ ìµœì†Œ, ê¸°ì¡´ ëª…ë ¹/ì „ëµ ë³€ê²½ ì—†ìŒ. ë‹¨, Section/Groupì˜ `data-nav-skip` ì œê±° â†’ `itemFilter`ê°€ ëŒ€ì‹ í•˜ëŠ” êµì²´ ê´€ê³„.

---

**ğŸ§‘ ì‚¬ìš©ì**: ì´ ë°©ì‹ì€ complexí•œ ëª¨ë“ˆì¸ë° hookì„ í•˜ë‚˜ì”© ê½‚ëŠ” ë°©ì‹ì€ ëª¨ë“ˆí™”ì— ë¶ˆë¦¬í•˜ë‹¤. ë¯¸ë“¤ì›¨ì–´ì²˜ëŸ¼ ëª¨ë“ˆí™”í•´ì„œ íŒŒì´í”„ë¼ì¸ ìì²´ë¥¼ ê±´ë“¤ ìˆ˜ ìˆê²Œ ì—´ì–´ì£¼ëŠ” ê±´?

**ğŸ¤– AI**: commands, keybindings, middlewareëŠ” ì´ë¯¸ Zoneì— ë“±ë¡ ê°€ëŠ¥. ìœ ì¼í•˜ê²Œ ë¹ ì§„ ì¶•ì€ `transformItems`(ì•„ì´í…œ ëª©ë¡ ë³€í™˜). "Zone Behavior" í”„ë¡œí† ì½œ vs plain setup function ë‘ ë ˆë²¨ì˜ ëª¨ë“ˆí™” ì „ëµ ì œì‹œ.

---

**ğŸ§‘ ì‚¬ìš©ì**: ê¸°ì¡´ OSì˜ focus ê¸°ëŠ¥ë„ ì´ behaviorì˜ í•œ ì¢…ë¥˜ì´ë©´ì„œ ê¸°ë³¸ ì œê³µì´ë©´ ì œì¼ í›Œë¥­í•  ê²ƒ ê°™ì€ë°.

**ğŸ¤– AI**: **Uniform Extension Principle** â€” built-in ê¸°ëŠ¥ì´ í™•ì¥ ë©”ì»¤ë‹ˆì¦˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë©´ ë©”ì»¤ë‹ˆì¦˜ì˜ ì¶©ë¶„ì„±ì´ ìë™ ì¦ëª…ë¨. Smalltalk, Express, React Hooks ì„ ë¡€. í•˜ì§€ë§Œ ì „ë©´ ë¦¬íŒ©í† ë§ì€ ê±°ëŒ€í•œ ì‘ì—….

---

**ğŸ§‘ ì‚¬ìš©ì**: ì´ìƒì ì´ë¼ë©´ ì „ë©´ìœ¼ë¡œ ê°„ë‹¤. /doubt í•´ë³´ì. ê±°ëŒ€í•˜ë‹¤ê³  ì˜¤ë˜ ê±¸ë¦°ë‹¤ê³  ë¶ˆí¸í•˜ë‹¤ê³  ì´ëŸ° ê±´ ì¤‘ìš”í•˜ì§€ ì•Šì•„. ë‘ ë²ˆ ë§Œë“¤ì§€ ì•Šì„ ìƒê°ìœ¼ë¡œ ë§Œë“ ë‹¤.

**ğŸ¤– AI**: /doubt 2ë¼ìš´ë“œ ì‹¤í–‰. í•µì‹¬ ê²°ê³¼:
- ğŸ”´ **Self-Hosting ì œê±°** â€” YAGNI. OS focus êµì²´ ìˆ˜ìš” ì—†ìŒ. í•œ ì¶•(itemFilter) ê°œì…ì´ë©´ ì¶©ë¶„.
- ğŸ”´ **navigationLevel ìƒíƒœ ì œê±°** â€” focusedItemì˜ `data-level`ì—ì„œ íŒŒìƒ ê°€ëŠ¥. ë³„ë„ ìƒíƒœëŠ” ë™ê¸°í™” ë¬¸ì œë§Œ ìƒì„±.
- ğŸŸ¡ **Behavior Protocol â†’ plain setup function** â€” ê°™ì€ ëª¨ë“ˆí™”, ì ì€ ê°œë….
- ğŸŸ¢ **hierarchicalNavigation, data-level, Enter/\ í‚¤ë°”ì¸ë”©** â€” ìœ ì§€.

---

**ğŸ§‘ ì‚¬ìš©ì**: itemFilterë§Œ ì œê³µí•˜ë©´ ë‚˜ë¨¸ì§€ëŠ” ìˆëŠ” ì¶•ìœ¼ë¡œ ë‹¤ ë§Œë“¤ ìˆ˜ ìˆëŠ” ê±°ë„¤.

**ğŸ¤– AI**: ë§ë‹¤. zone.command(), keybindings, spatial strategy, data-level íŒŒìƒ â€” ì „ë¶€ ê¸°ì¡´ ì¶•. OSì— í•˜ë‚˜ë§Œ ì—´ì–´ì£¼ë©´ ëœë‹¤.

---

**ğŸ§‘ ì‚¬ìš©ì**: ë°©í–¥ì€ í™•ì •. itemFilterê°€ ë²”ìš©ì ì¸ê°€ ê³ ë¯¼ ì¤‘.

**ğŸ¤– AI**: `itemFilter`ëŠ” `data-nav-skip`ì˜ ë™ì  ë²„ì „. "ì§€ê¸ˆ ì´ Zoneì—ì„œ í‚¤ë³´ë“œë¡œ ë„ë‹¬í•  ìˆ˜ ìˆëŠ” ì•„ì´í…œì€ ë¬´ì—‡ì¸ê°€"ëŠ” ëª¨ë“  í¬ì»¤ìŠ¤ ì‹œìŠ¤í…œì˜ ë³´í¸ì  ì§ˆë¬¸. ê²€ìƒ‰ í•„í„°, ì ‘íŒ ì„¹ì…˜ ê±´ë„ˆë›°ê¸°, íƒ­ ì „í™˜ ë“± ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ë²”ìš©ì . âœ… í™•ì¸.

---

**í•œ ì¤„ ìš”ì•½**: 25ë¶„ ë§Œì— "Behavior Protocol ì „ë©´ ë¦¬íŒ©í† ë§"ì—ì„œ "itemFilter hook í•˜ë‚˜ë©´ ì¶©ë¶„"ìœ¼ë¡œ ìˆ˜ë ´.

---

## Conclusion

### Why
ë¹Œë”ì˜ 3ê³„ì¸µ(Section/Group/Item) êµ¬ì¡°ì—ì„œ ë§ˆìš°ìŠ¤ëŠ” ëª¨ë“  ê³„ì¸µì„ ì„ íƒ ê°€ëŠ¥í•˜ë‚˜, í‚¤ë³´ë“œëŠ” Itemë§Œ ìˆœíšŒí•œë‹¤. ì´ **input modality ë¹„ëŒ€ì¹­**ì„ í•´ì†Œí•˜ì—¬ í‚¤ë³´ë“œ ì‚¬ìš©ìì—ê²Œë„ ë™ë“±í•œ ê³„ì¸µ ì ‘ê·¼ì„±ì„ ë¶€ì—¬í•´ì•¼ í•œë‹¤.

### Intent
OSì— ìµœì†Œí•œì˜ í™•ì¥ í¬ì¸íŠ¸(`itemFilter`)ë¥¼ ì¶”ê°€í•˜ì—¬, ê¸°ì¡´ íŒŒì´í”„ë¼ì¸(commands, contexts, strategies, keybindings)ì„ ìµœëŒ€í•œ í™œìš©í•˜ë©´ì„œ ë¹Œë”ê°€ ì»¤ìŠ¤í…€ ê³„ì¸µ ë‚´ë¹„ê²Œì´ì…˜ì„ êµ¬í˜„í•  ìˆ˜ ìˆê²Œ í•œë‹¤.

### Warrants (ìµœì¢…)

1. **W1. ë¹„ëŒ€ì¹­ ì¡´ì¬**: `data-nav-skip="true"`ë¡œ Section/Groupì´ í‚¤ë³´ë“œ ìˆœíšŒì—ì„œ ì •ì  ì œì™¸ë¨.
2. **W2. ë¹Œë” ëª¨ë¸**: Arrow=ê°™ì€ ë ˆë²¨ í˜•ì œ ìˆœíšŒ, Enter=drill down, `\`=drill up.
3. **W3. itemFilter**: Zone configì— `(items: string[]) => string[]` ì¶”ê°€ â†’ DOM_ITEMS/DOM_RECTS providerê°€ ì ìš©.
4. **W4. íŒŒìƒ ë ˆë²¨**: `navigationLevel`ì€ ë³„ë„ ìƒíƒœ ì•„ë‹˜. `focusedItem.dataset.level`ì—ì„œ ì‹¤ì‹œê°„ íŒŒìƒ. ë™ê¸°í™” ë¬¸ì œ ì›ì²œ ì œê±°.
5. **W5. data-nav-skipê³¼ì˜ ê´€ê³„**: `data-nav-skip`=ì •ì  ì œì™¸(ì¥ì‹ìš© ìš”ì†Œ), `itemFilter`=ë™ì  í•„í„°ë§(ë ˆë²¨ ê¸°ë°˜). ì—­í•  ë¶„ë¦¬, ê³µì¡´ ê°€ëŠ¥.
6. **W6. YAGNI**: Self-Hosting(OS focusë¥¼ Behavior ì¸ìŠ¤í„´ìŠ¤ë¡œ), Behavior Protocol â€” ê²€ì¦ ê²°ê³¼ ê³¼ì‰. ë¹Œë”ê°€ í•„ìš”í•œ ê±´ OS focus ì „ì²´ êµì²´ê°€ ì•„ë‹ˆë¼ í•œ ì¶•(ì•„ì´í…œ ëª©ë¡) ê°œì….
7. **W7. ê¸°ì¡´ ì¶•ìœ¼ë¡œ ì¡°í•©**: `zone.command()`(DRILL_DOWN/UP), `keybindings`(Enter/\), spatial strategy, `data-level` ì†ì„± â€” ì „ë¶€ ì´ë¯¸ ì¡´ì¬.
8. **W8. ë²”ìš©ì„±**: `itemFilter`ëŠ” `data-nav-skip`ì˜ ë™ì  ë²„ì „. "ì§€ê¸ˆ ìˆœíšŒ ê°€ëŠ¥í•œ ì•„ì´í…œì€ ë¬´ì—‡ì¸ê°€"ëŠ” ëª¨ë“  í¬ì»¤ìŠ¤ ì‹œìŠ¤í…œì˜ ë³´í¸ì  ì§ˆë¬¸.

### ì‹¤í–‰ ê³„íš

**OS ë³€ê²½ (ìµœì†Œ):**
1. Zone config íƒ€ì…ì— `itemFilter?: (items: string[]) => string[]` ì¶”ê°€
2. `DOM_ITEMS` context provider ëì— filter ì ìš© (3ì¤„)
3. `DOM_RECTS` context provider ëì— ë™ì¼ filter ì ìš© (3ì¤„)

**ë¹Œë” ë³€ê²½:**
1. `Builder.Section`/`Builder.Group`ì—ì„œ `data-nav-skip` ì œê±°
2. `setupHierarchicalNavigation(canvasZone)` plain function ì‘ì„±:
   - `itemFilter`: focusedItemì˜ `data-level`ê³¼ ê°™ì€ ë ˆë²¨ë§Œ í†µê³¼
   - `DRILL_DOWN` command: í˜„ì¬ ì•„ì´í…œì˜ ì²« ë²ˆì§¸ ìì‹ì— í¬ì»¤ìŠ¤
   - `DRILL_UP` command: í˜„ì¬ ì•„ì´í…œì˜ ë¶€ëª¨ì— í¬ì»¤ìŠ¤
   - keybindings: Enterâ†’DRILL_DOWN, `\`â†’DRILL_UP

### í•œ ì¤„ ìš”ì•½

> **OSì— `itemFilter` hook í•˜ë‚˜ë§Œ ì—´ì–´ì£¼ë©´, ë¹Œë”ì˜ ê³„ì¸µ ë‚´ë¹„ê²Œì´ì…˜ì€ ê¸°ì¡´ ì¶•(command, keybinding, spatial strategy, data-level íŒŒìƒ)ì˜ ì¡°í•©ìœ¼ë¡œ êµ¬í˜„ ê°€ëŠ¥í•˜ë‹¤.**
