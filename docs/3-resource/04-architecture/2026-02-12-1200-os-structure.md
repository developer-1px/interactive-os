# OS êµ¬ì¡° ë…¼ì¦ ì—¬ì •

## ëŒ€í™”ë¡

**ğŸ§‘ ì‚¬ìš©ì**: í˜„ì¬ OS êµ¬ì¡°ì— ê´€í•˜ì—¬ (discussion ì‹œì‘)

**ğŸ¤– AI**: os-newì˜ ë ˆì´ì–´ë“œ ë„˜ë²„ë§(1~6) + Core + Kernel + Schema êµ¬ì¡°ë¥¼ ë¶„ì„. re-frame 6 ë„ë¯¸ë…¸ì™€ì˜ ë§¤í•‘ì„ ê²€í† í•˜ê³ , `2-contexts`ê°€ íŒŒì´í”„ë¼ì¸ ë‹¨ê³„ê°€ ì•„ë‹Œ ì¸í”„ë¼ê°€ ì•„ë‹ˆëƒëŠ” ì˜ë¬¸ì„ ì œê¸°.

**ğŸ§‘ ì‚¬ìš©ì**: ë ˆì´ì–´ ë„˜ë²„ë§ì€ ë„ˆë¬´ ë§Œì¡±í•´. re-frame 6 ë„ë¯¸ë…¸ë¥¼ FEì— ì˜ ì´ì‹í–ˆë‹¤ ìƒê°í•´. ì–´ìƒ‰í•œ ì´ë¦„ì´ë‚˜ ìˆœì„œê°€ ìˆì–´?

**ğŸ¤– AI**: `2-contexts`ê°€ React Contextë¡œ ì˜¤í•´ë  ìˆ˜ ìˆê³ , ë°ì´í„° íë¦„ ë‹¨ê³„ê°€ ì•„ë‹Œ ì¸í”„ë¼ë¼ê³  ì£¼ì¥.

**ğŸ§‘ ì‚¬ìš©ì**: í ... ìˆœì„œìƒ ë§ì§€ ì•Šì•„?

---

**ğŸ¤– AI**: ì½”ë“œë¥¼ ì‹¤ì œë¡œ í™•ì¸. `kernel.defineContext("dom-items", ...)`ëŠ” React Contextê°€ ì•„ë‹ˆë¼ ì»¤ë§¨ë“œ ì‹¤í–‰ ì „ DOM ë°ì´í„°ë¥¼ lazy injectí•˜ëŠ” í”„ë¡œë°”ì´ë”. re-frame coeffectì— í•´ë‹¹í•˜ë©° ìˆœì„œìƒ ì •í™•. ê¸°ì¡´ ì£¼ì¥ì„ ì² íšŒ.

**ğŸ§‘ ì‚¬ìš©ì**: ë‚´ê°€ ë§ë‹¤ê³  í•´ì„œ ë§ë‹¤ê³  í•œê±°ì•¼?

**ğŸ¤– AI**: ì•„ë‹ˆë‹¤. ì½”ë“œ(`kernel.defineContext`)ê°€ ê·¼ê±°ì˜€ì§€, ì‚¬ìš©ìì˜ ë°˜ë°•ì´ ê·¼ê±°ê°€ ì•„ë‹ˆì—ˆë‹¤. ë‹¨, "context"ë¼ëŠ” ì´ë¦„ì´ React Contextì™€ í˜¼ë™ë  ìˆ˜ ìˆë‹¤ëŠ” ì ì€ ìœ íš¨.

**ğŸ§‘ ì‚¬ìš©ì**: contextsë¼ê³  í•œ ì´ìœ ê°€ ê²°êµ­ state handlerì—ì„œ ctxì— ë“¤ì–´ê°€ëŠ” ê°’ì´ì§€ ì•Šì•„?

**ğŸ¤– AI**: `ctx.inject(DOM_ITEMS)` â€” ë¬¸ì ê·¸ëŒ€ë¡œ `ctx` íŒŒë¼ë¯¸í„°ì— ë“¤ì–´ê°€ëŠ” ê°’. "context"ê°€ ì¶”ìƒì  ì€ìœ ê°€ ì•„ë‹ˆë¼ **ì½”ë“œì™€ 1:1 ëŒ€ì‘**. ì´ë¦„ ë³€ê²½ ì œì•ˆì˜ ê·¼ê±°ê°€ ì†Œë©¸.

> **ì „í™˜ì : "context" ë„¤ì´ë° ë…¼ìŸ ì¢…ê²°. ì´ë¦„ì€ ì½”ë“œ êµ¬ì¡°ì™€ ì •í™•íˆ ì¼ì¹˜í•œë‹¤.**

---

**ğŸ§‘ ì‚¬ìš©ì**: ë„˜ë²„ë§ ë°– ë””ë ‰í† ë¦¬ë“¤ì€ ë ˆê±°ì‹œì•¼. middlewareëŠ” í™•ì •ì´ê³ , pipelineì´ ì•„ë‹ˆë¼ ë²ˆí˜¸ê°€ ì—†ëŠ” ê²ƒì€ ë§ì•„.

**ğŸ¤– AI**: "ë²ˆí˜¸ ìˆìŒ = íŒŒì´í”„ë¼ì¸ ë‹¨ê³„, ë²ˆí˜¸ ì—†ìŒ = íš¡ë‹¨ ì¸í”„ë¼" ì›ì¹™ í™•ì¸.

**ğŸ§‘ ì‚¬ìš©ì**: OS ë‚´ë¶€ ì»´í¬ë„ŒíŠ¸ì™€ ì™¸ë¶€ ì»´í¬ë„ŒíŠ¸ êµ¬ë¶„ì´ ê³ ë¯¼.

**ğŸ¤– AI**: `AntigravityOS.tsx` Facadeê°€ ì´ë¯¸ public/private ê²½ê³„ë¥¼ ìˆ˜í–‰í•˜ë¯€ë¡œ ë³„ë„ í´ë” ë¶„ë¦¬ê°€ í•„ìˆ˜ëŠ” ì•„ë‹ˆë¼ê³  ì œì•ˆ.

**ğŸ§‘ ì‚¬ìš©ì**: ê·¸ëŸ¬ë„¤. ê·¸ë˜ë„ ë ˆì´ì–´ì  êµ¬ë¶„ì€ í•„ìš”í•œë°.

> **ì „í™˜ì : Facade = public ê²½ê³„, í´ë” = ë ˆì´ì–´ ê²½ê³„. ë‘ ê´€ì‹¬ì‚¬ ë¶„ë¦¬.**

---

**ğŸ§‘ ì‚¬ìš©ì**: ì§€ê¸ˆ radix ìˆ˜ì¤€ë„ ìˆì–´ì„œ 3 layerì•¼. FocusGroup / ZIFT / Dialog ì´ëŸ° ëŠë‚Œ.

**ğŸ¤– AI**: ì²˜ìŒì— FocusGroupì„ Layer 3ìœ¼ë¡œ ì˜¤í•´í–ˆìœ¼ë‚˜ ì‚¬ìš©ìê°€ êµì •. Dialogê°€ Radix ìˆ˜ì¤€ì˜ ë³µí•© ì»´í¬ë„ŒíŠ¸.

```
Layer 1: FocusGroup, FocusItem (base)
Layer 2: Zone, Item, Field, Trigger (primitives)
Layer 3: Dialog, Modal (radix-level compound)
```

**ğŸ§‘ ì‚¬ìš©ì**: í´ë” êµ¬ì¡°ë¡œ ë ˆì´ì–´ì™€ ëª¨ë“ˆì´ ëˆˆì— ë³´ì—¬ì•¼ í•´. ì„œë¸Œ í´ë”ë¥¼ ë°˜ë“œì‹œ ë ˆì´ì–´ë³„ë¡œ êµ¬ë¶„í•  ê±°ì•¼.

> **ì›ì¹™ í™•ë¦½: "í´ë”ë¥¼ ì—´ë©´ ì•„í‚¤í…ì²˜ê°€ ë³´ì¸ë‹¤."**

---

**ğŸ§‘ ì‚¬ìš©ì**: (Layer 3ì„) shadcnì´ë¼ê³  ì§€ì„ ê±°ì•¼.

**ğŸ¤– AI**: ì—­í• ì„ ê¸°ìˆ í•˜ì§€ ì•ŠëŠ” ì™¸ë¶€ í”„ë¡œì íŠ¸ ì´ë¦„ì´ë‹¤. LLM í”„ë¡¬í”„íŠ¸ ì˜ë„ëŠ” ì´í•´í•˜ì§€ë§Œ Tailwind êµ¬í˜„ ì˜¤ì—¼ ë¦¬ìŠ¤í¬ê°€ ìˆë‹¤.

**ğŸ§‘ ì‚¬ìš©ì**: ê·¸ëŸ¬ë©´ radixë¼ê³  í•˜ì.

**ğŸ¤– AI**: RadixëŠ” headlessì´ë¯€ë¡œ Tailwind ì˜¤ì—¼ ì—†ì´ compound ì¸í„°í˜ì´ìŠ¤ íŒ¨í„´ë§Œ ìœ ë„. ì í•©.

**ğŸ§‘ ì‚¬ìš©ì**: (Layer 1ì€) baseë‚˜ coreë¡œ ë°”ê¿€ê¹Œ?

**ğŸ¤– AI**: `core/`ëŠ” `os-new/core/`ì™€ ì´ë¦„ ì¶©ëŒ. `base`ê°€ ê¹”ë”í•˜ë‹¤.

> **í™•ì •: `base / primitives / radix`**

---

**ğŸ§‘ ì‚¬ìš©ì**: listenerê°€ í•  ìˆ˜ ìˆëŠ” ê²Œ ì´ì œ ë­ê°€ ìˆì„ê¹Œ?

**ğŸ¤– AI**: ë§ˆìš°ìŠ¤ê°€ ì—†ë‹¤ê³  ì£¼ì¥í–ˆìœ¼ë‚˜ ì‚¬ìš©ìê°€ êµì • â€” `FocusSensor`ê°€ ì´ë¯¸ mousedownì„ ì²˜ë¦¬.

**ğŸ§‘ ì‚¬ìš©ì**: ì´ë¦„ê³¼ êµ¬ì„±ì˜ ë¬¸ì œì¸ë°. KeyboardListener / MouseListener / ClipboardListenerê°€ ë§ì§€ ì•Šì•„?

**ğŸ¤– AI**: í˜„ì¬ Listener/Sensor/Intent 3íŒ¨í„´ í˜¼ì¬. "Driver"ë¥¼ ì œì•ˆí–ˆìœ¼ë‚˜ ê³¼í•œ OS ì€ìœ . ì‚¬ìš©ìì˜ ë°˜ë¬¸("Driver?") í›„ Listener í†µì¼ë¡œ ìˆ˜ì •.

**ğŸ¤– AI**: (Red Team) ì§„ì§œ ë¬¸ì œëŠ” ì´ë¦„ì´ ì•„ë‹ˆë¼ `keybindings.ts`, `osDefaults.ts`ê°€ listenerê°€ ì•„ë‹Œ **ì„¤ì • ë°ì´í„°**ì¸ë° `1-listeners` ì•ˆì— ìˆëŠ” ê²ƒ.

**ğŸ§‘ ì‚¬ìš©ì**: keybindingì€ ë¶„ëª… pipelineì€ ì•„ë‹ˆì§€? â†’ ë§ë‹¤.

> **ì „í™˜ì : keybindingsë¥¼ `keymaps/`ë¡œ ë¶„ë¦¬.**

---

**ğŸ§‘ ì‚¬ìš©ì**: ì»¤ë„ë„ í‚¤ë°”ì¸ë”©ì´ê³  Zoneì´ í‚¤ë°”ì¸ë”©ì„ ê°€ì§ˆ ìˆ˜ ìˆì–´. Zone ë²„ë¸”ë§ì´ê³  Appë„ Kernelë„ Zoneì´ì•¼.

**ğŸ¤– AI**: "ëª¨ë“  ê²ƒì€ Zoneì´ë‹¤" â€” í‚¤ë°”ì¸ë”©ì´ Zone ìŠ¤ì½”í”„ì´ë©° ë²„ë¸”ë§í•˜ëŠ” êµ¬ì¡° ë°œê²¬. ìº¡ì²˜=Listener, ë²„ë¸”ë§+í•´ì„=ì»¤ë„, ë°ì´í„°=Zone config.

**ğŸ§‘ ì‚¬ìš©ì**: Zoneì´ ì»¤ë§¨ë“œë¥¼ ê°€ì§€ëŠ” ê±´ ë§ì§€ë§Œ, groupì´ ì»¤ë§¨ë“œë¥¼ ê°€ì§€ëŠ” êµ¬ì¡°ì¸ë°.

**ğŸ¤– AI**: Zone=UI íŒŒì‚¬ë“œ(ì„ ì–¸), FocusGroup=ëŸ°íƒ€ì„(ì»¤ë§¨ë“œ ì†Œìœ +ZoneRegistry ë“±ë¡). `onAction` ë“±ì€ í•˜ë“œì½”ë”©ëœ í‚¤ë°”ì¸ë”© â€” ë²”ìš© ì‹œìŠ¤í…œìœ¼ë¡œ ì¼ë°˜í™” ê°€ëŠ¥.

**ğŸ§‘ ì‚¬ìš©ì**: í‚¤ë°”ì¸ë”©ì€ ë³„ë„ ë…¼ì˜ê°€ í•„ìš”í•  ì •ë„ë¡œ í° ê±´.

> **í‚¤ë°”ì¸ë”© ì‹œìŠ¤í…œì€ ë³„ë„ /discussionìœ¼ë¡œ ì—°ê¸°.**

---

**ğŸ§‘ ì‚¬ìš©ì**: os-newì˜ ì´ìƒì ì¸ í´ë” êµ¬ì¡°ë§Œ ì¡ì•„ë³´ê³  ë§ˆë¬´ë¦¬í•˜ì.

**ğŸ§‘ ì‚¬ìš©ì**: libëŠ” ë³„ë„ë¡œ ëª¨ì•„ë‘ì§€ ì•Šê³  ì‘ì§‘ë„ì— ë§ê²Œ ê·¼ì²˜ë¡œ ë³´ë‚¼ ê±°ì•¼.

> **ìµœì¢… í™•ì •: íŒŒì´í”„ë¼ì¸ 6ê°œ + ë¹„íŒŒì´í”„ë¼ì¸ 3ê°œ(schema, middleware, keymaps). lib í•´ì²´. ë ˆê±°ì‹œ 7ê°œ í´ë” ì „ë¶€ í¡ìˆ˜/ì œê±°.**

---

## í•œ ì¤„ ìš”ì•½

> **os-newì˜ re-frame ë„ë¯¸ë…¸ ì´ì‹ì„ ê²€ì¦í•˜ê³ , "í´ë”=ë ˆì´ì–´, Facade=ê²½ê³„, ë²ˆí˜¸=íŒŒì´í”„ë¼ì¸" ì›ì¹™ì„ í™•ë¦½í•˜ì—¬, íŒŒì´í”„ë¼ì¸ 6ê°œ + ë¹„íŒŒì´í”„ë¼ì¸ 3ê°œ + ì»´í¬ë„ŒíŠ¸ 3ì¸µ(base/primitives/radix)ì˜ ì´ìƒì  êµ¬ì¡°ë¥¼ í•©ì˜í–ˆë‹¤.**


---

# OS êµ¬ì¡° ë…¼ì¦ ê²°ë¡ 

## Why

í˜„ì¬ `os-new` í´ë” êµ¬ì¡°ê°€ re-frame 6 ë„ë¯¸ë…¸ ì´ì‹ìœ¼ë¡œì„œ ì •í•©ì ì¸ì§€ ê²€ì¦í•˜ê³ , ë ˆê±°ì‹œ ì •ë¦¬ ë°©í–¥ê³¼ ì´ìƒì  êµ¬ì¡°ë¥¼ í™•ë¦½í•˜ê¸° ìœ„í•´.

## Intent

- ë„˜ë²„ë§ ë ˆì´ì–´(1~6)ì˜ re-frame ë§¤í•‘ ìœ íš¨ì„± ê²€ì¦
- ë„˜ë²„ë§ ë°– í´ë”ë“¤ì˜ ì¡´ì¬ ì´ìœ ì™€ ì •ë¦¬ ê¸°ì¤€ í™•ë¦½
- ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ ë ˆì´ì–´ êµ¬ì¡°(3ì¸µ) í™•ì •
- `1-listeners` ë‚´ë¶€ì˜ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ ê¸°ì¤€ ë°œê²¬

## Warrants (í™•ì •ëœ ë…¼ê±°)

### íŒŒì´í”„ë¼ì¸ êµ¬ì¡°
- **W1.** 1~6 ë„˜ë²„ë§ì€ re-frame 6 ë„ë¯¸ë…¸ì˜ FE ì´ì‹ì´ë©°, ìˆœì„œê°€ ì •í™•í•˜ë‹¤
- **W2.** `2-contexts`ëŠ” React Contextê°€ ì•„ë‹ˆë¼ `ctx.inject()`ì— ì£¼ì…ë˜ëŠ” coeffect ë°ì´í„°ë‹¤. ì´ë¦„ì€ ì»¤ë„ API(`defineContext`)ì™€ 1:1 ëŒ€ì‘í•˜ë¯€ë¡œ ì •í™•í•˜ë‹¤
- **W3.** ë²ˆí˜¸ ìˆìŒ = íŒŒì´í”„ë¼ì¸ ë‹¨ê³„ (ë°ì´í„°ê°€ íë¥´ëŠ” ê³³), ë²ˆí˜¸ ì—†ìŒ = íš¡ë‹¨ ì¸í”„ë¼ (ì°¸ì¡°ë˜ëŠ” ê³³)

### ì»´í¬ë„ŒíŠ¸ ë ˆì´ì–´
- **W4.** `6-components`ëŠ” 3ê°œ ë ˆì´ì–´ë¡œ êµ¬ì„±: `base/`(FocusGroup â€” ìˆœìˆ˜ í–‰ë™) â†’ `primitives/`(Zone, Item â€” OS í”„ë¦¬ë¯¸í‹°ë¸Œ) â†’ `radix/`(Dialog, Modal â€” ë³µí•© ìœ„ì ¯)
- **W5.** `radix/` ëª…ëª…ì€ LLMì´ Radix ì¸í„°í˜ì´ìŠ¤ íŒ¨í„´ì„ ìë™ìœ¼ë¡œ ë”°ë¥´ë„ë¡ í•˜ëŠ” í”„ë¡¬í”„íŠ¸ ì—­í• ì´ë‹¤ (Tailwind ì˜¤ì—¼ ì—†ìŒ)
- **W6.** `AntigravityOS.tsx` Facadeê°€ public/private ê²½ê³„ë¥¼ ë‹´ë‹¹í•˜ë¯€ë¡œ ë³„ë„ í´ë” ë¶„ë¦¬ ë¶ˆí•„ìš”

### Listener êµ¬ì¡°
- **W7.** `1-listeners` ë‚´ë¶€ëŠ” `*Listener`ë¡œ í†µì¼ (Sensor, Intent í˜¼ì¬ í•´ì†Œ)
- **W8.** `keybindings.ts`, `osDefaults.ts`ëŠ” íŒŒì´í”„ë¼ì¸ì´ ì•„ë‹ˆë¼ ë§¤í•‘ ì„¤ì •ì´ë¯€ë¡œ `keymaps/`ë¡œ ë¶„ë¦¬
- **W9.** `lib/` ìœ í‹¸ë¦¬í‹°ëŠ” ì¤‘ì•™ ì§‘ì¤‘í™”í•˜ì§€ ì•Šê³  ì‘ì§‘ë„ ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ì²˜ ê·¼ì²˜ì— ë°°ì¹˜

### Zoneê³¼ Keybinding (ë³„ë„ ë…¼ì˜ í•„ìš”)
- **W10.** Appë„ Kernelë„ Zoneì´ë‹¤ â€” Zoneì´ ì‹œìŠ¤í…œì˜ í†µí•© ì¶”ìƒí™” ë‹¨ìœ„
- **W11.** Keybindingì€ Zone ìŠ¤ì½”í”„ì´ë©° ë²„ë¸”ë§í•œë‹¤. ìº¡ì²˜=Listener, í•´ì„+ë²„ë¸”ë§=ì»¤ë„, ë°ì´í„°=Zone config
- **W12.** `onAction`, `onCopy` ë“± ëª…ì‹œì  propì€ í•˜ë“œì½”ë”©ëœ í‚¤ë°”ì¸ë”©ì´ë¯€ë¡œ ë²”ìš© ì‹œìŠ¤í…œìœ¼ë¡œ ì¼ë°˜í™” ê°€ëŠ¥ (í° ê±´ â€” ë³„ë„ ë…¼ì˜)

## í™•ì •ëœ ì´ìƒì  êµ¬ì¡°

```
os-new/
â”œâ”€â”€ kernel.ts
â”œâ”€â”€ AntigravityOS.tsx
â”‚
â”‚  â•â•â• íŒŒì´í”„ë¼ì¸ (1~6) â•â•â•
â”œâ”€â”€ 1-listeners/          â† *Listener í†µì¼
â”œâ”€â”€ 2-contexts/           â† ctx.inject() ë°ì´í„°
â”œâ”€â”€ 3-commands/           â† ìƒíƒœ ë³€í™˜
â”œâ”€â”€ 4-effects/            â† ì‚¬ì´ë“œì´í™íŠ¸
â”œâ”€â”€ 5-hooks/              â† êµ¬ë…
â”œâ”€â”€ 6-components/         â† View
â”‚   â”œâ”€â”€ base/             â† í–‰ë™ í”„ë¦¬ë¯¸í‹°ë¸Œ
â”‚   â”œâ”€â”€ primitives/       â† OS í”„ë¦¬ë¯¸í‹°ë¸Œ (ZIFT)
â”‚   â””â”€â”€ radix/            â† ë³µí•© ìœ„ì ¯
â”‚
â”‚  â•â•â• ë¹„íŒŒì´í”„ë¼ì¸ â•â•â•
â”œâ”€â”€ schema/               â† ê³µìœ  íƒ€ì…
â”œâ”€â”€ middleware/            â† ì¸í„°ì…‰í„°
â””â”€â”€ keymaps/              â† ì…ë ¥ ë§¤í•‘ ì„¤ì •
```

### ì œê±° ëŒ€ìƒ
| í˜„ì¬ | í–‰ì„ ì§€ |
|---|---|
| `primitives/` | â†’ `6-components/base/` |
| `registry/` | â†’ `schema/focus/` |
| `store/` | â†’ `2-contexts/` |
| `shared/` | â†’ `6-components/` |
| `state/` | â†’ `schema/state/` |
| `core/` | â†’ ì»¤ë„ í¡ìˆ˜ |
| `lib/` | â†’ ê° ì‚¬ìš©ì²˜ ê·¼ì²˜ë¡œ ë¶„ì‚° |

## í•œ ì¤„ ìš”ì•½

> **os-newëŠ” re-frame 6 ë„ë¯¸ë…¸ë¥¼ ì •í™•íˆ ì´ì‹í•œ íŒŒì´í”„ë¼ì¸(1~6)ê³¼ 3ê°œì˜ íš¡ë‹¨ ì¸í”„ë¼(schema/middleware/keymaps)ë¡œ êµ¬ì„±ë˜ë©°, ì»´í¬ë„ŒíŠ¸ëŠ” baseâ†’primitivesâ†’radix 3ì¸µ, Facadeê°€ public ê²½ê³„ë¥¼ ë‹´ë‹¹í•œë‹¤.**
