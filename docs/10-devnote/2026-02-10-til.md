# ğŸ“ TIL: 2026-02-10

> Inspector 15ê°œ íŒŒì¼ ë³µì› + OS Keybinding í†µí•© + ë¬´í•œ ë£¨í”„ ë””ë²„ê¹…ì—ì„œ ë°°ìš´ ê²ƒë“¤

---

## 1. `useSyncExternalStore`ì˜ snapshotì€ ë°˜ë“œì‹œ ì°¸ì¡° ì•ˆì •ì„±ì„ ë³´ì¥í•´ì•¼ í•œë‹¤

```ts
// âŒ ë§¤ í˜¸ì¶œë§ˆë‹¤ ìƒˆ ë°°ì—´ â†’ ë¬´í•œ ì¬ë Œë”
getPanels(): PanelEntry[] {
  return Array.from(panels.values());
}

// âœ… ë³€ê²½ ì‹œì—ë§Œ ìƒˆ ì°¸ì¡°
let snapshot: PanelEntry[] = [];
function rebuildSnapshot() { snapshot = Array.from(panels.values()); }
getPanels(): PanelEntry[] { return snapshot; }
```

`useSyncExternalStore`ëŠ” `Object.is`ë¡œ ë¹„êµí•œë‹¤. `getSnapshot`ì´ ë§¤ë²ˆ ìƒˆ ë°°ì—´ì„ ë§Œë“¤ë©´ ReactëŠ” "ë³€ê²½ë¨!"ìœ¼ë¡œ íŒë‹¨ â†’ ì¬ë Œë” â†’ ë‹¤ì‹œ `getSnapshot` â†’ ë˜ ìƒˆ ë°°ì—´ â†’ **ë¬´í•œ ë£¨í”„**.

**êµí›ˆ**: ì™¸ë¶€ ìŠ¤í† ì–´ë¥¼ Reactì— ì—°ê²°í•  ë•Œ, snapshotì˜ **ì°¸ì¡° ì•ˆì •ì„±(referential stability)**ì„ ë°˜ë“œì‹œ ê²€ì¦í•˜ë¼.

---

## 2. `exactOptionalPropertyTypes`ì—ì„œ `undefined` ì§ì ‘ ëŒ€ì… ê¸ˆì§€

```ts
// âŒ ì»´íŒŒì¼ ì—ëŸ¬
const obj: { elementId?: string } = {
  elementId: someValue || undefined  // Type 'undefined' is not assignable
};

// âœ… conditional spread
const obj: { elementId?: string } = {
  ...(someValue != null ? { elementId: someValue } : {})
};
```

TypeScriptì˜ `exactOptionalPropertyTypes`ëŠ” `undefined`ë¥¼ optional propertyì— **ëª…ì‹œì ìœ¼ë¡œ** ë„£ëŠ” ê±¸ ê¸ˆì§€í•œë‹¤. "ì—†ìœ¼ë©´ ì•„ì˜ˆ í‚¤ë¥¼ ì•ˆ ë„£ëŠ”" ê²ƒì´ ì˜¬ë°”ë¥¸ íŒ¨í„´.

---

## 3. TS4111 â€” Index SignatureëŠ” ë°˜ë“œì‹œ bracket notation

```ts
const sections: Record<string, boolean> = { dom: true, os: false };

// âŒ TS4111
sections.dom

// âœ…
sections["dom"]
```

`noPropertyAccessFromIndexSignature`ê°€ ì¼œì ¸ ìˆìœ¼ë©´ `Record<string, T>` íƒ€ì…ì˜ í”„ë¡œí¼í‹°ë¥¼ `.` ìœ¼ë¡œ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤. "ì´ê±´ ì •ì˜ëœ í”„ë¡œí¼í‹°ê°€ ì•„ë‹ˆë¼ ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ë¥¼ í†µí•œ ì ‘ê·¼"ì„ì„ ëª…ì‹œí•˜ëŠ” ì•ˆì „ì¥ì¹˜.

---

## 4. Kernelì˜ EffectMap íŒ¨í„´ â€” side-effectë„ ì„ ì–¸ì ìœ¼ë¡œ

```ts
// ì»¤ë§¨ë“œ í•¸ë“¤ëŸ¬ê°€ EffectMap ë°˜í™˜
const TOGGLE = kernel.defineCommand("TOGGLE", (_ctx) => () => {
  InspectorStore.toggle();
  return undefined;
});
```

Kernelì˜ ì»¤ë§¨ë“œ í•¸ë“¤ëŸ¬ëŠ” `{ effectName: value }` í˜•íƒœì˜ EffectMapì„ ë°˜í™˜í•˜ê³ , `defineEffect`ë¡œ ë“±ë¡ëœ í•¸ë“¤ëŸ¬ê°€ ì´ë¥¼ ë°›ì•„ ì‹¤í–‰í•œë‹¤. ìˆœìˆ˜í•œ state mutationì´ ì•„ë‹Œ side-effectë„ ì´ íŒ¨í„´ìœ¼ë¡œ í†µì¼ ê°€ëŠ¥. **ì»¤ë§¨ë“œì˜ "ë¬´ì—‡ì„ í–ˆëŠ”ì§€"ê°€ íŠ¸ëœì­ì…˜ì— ê¸°ë¡ë˜ë¯€ë¡œ Inspectorì—ì„œ ì¶”ì  ê°€ëŠ¥.**

---

## 5. Vite alias ë³€ê²½ í›„ì—ëŠ” ìºì‹œ í´ë¦¬ì–´ í•„ìˆ˜

```bash
rm -rf node_modules/.vite && kill <dev-server-pid>
npm run dev
```

ViteëŠ” dependency pre-bundling ê²°ê³¼ë¥¼ `node_modules/.vite`ì— ìºì‹œí•œë‹¤. aliasë¥¼ ë°”ê¿”ë„ ì´ì „ resolve ê²°ê³¼ê°€ ë‚¨ì•„ì„œ `Failed to resolve import` ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤. **alias ë³€ê²½ = ìºì‹œ ì‚­ì œ + ì„œë²„ ì¬ì‹œì‘**.

---

## ğŸ”¥ ë” ì˜í•˜ê³  ì‹¶ì€ ê²ƒë“¤

### "ì‘ì€ ì»¤ë°‹" ìŠµê´€
ì˜¤ëŠ˜ 15ê°œ íŒŒì¼ ë³µì› + import ë¦¬ë§¤í•‘ + ìŠ¤í† ì–´ ì—…ê·¸ë ˆì´ë“œ + í‚¤ë°”ì¸ë”© í†µí•© + ë¬´í•œë£¨í”„ ìˆ˜ì •ì„ **í•˜ë‚˜ì˜ ê±°ëŒ€í•œ ì»¤ë°‹**ì— ë‹´ì•˜ë‹¤. ì¤‘ê°„ì— ë¬¸ì œê°€ ìƒê²¼ì„ ë•Œ "ì–´ë””ì„œë¶€í„° ì˜ëª»ëì§€?"ë¥¼ ì¶”ì í•˜ê¸° ì–´ë ¤ì› ë‹¤. ë‹¤ìŒì—ëŠ” **í•œ ë‹¨ê³„ê°€ ëë‚  ë•Œë§ˆë‹¤ ì»¤ë°‹**í•˜ê³  ì‹¶ë‹¤:
1. íŒŒì¼ ë³µì› â†’ ì»¤ë°‹
2. import ë¦¬ë§¤í•‘ â†’ ì»¤ë°‹  
3. ìŠ¤í† ì–´ ì—…ê·¸ë ˆì´ë“œ â†’ ì»¤ë°‹
4. í‚¤ë°”ì¸ë”© í†µí•© â†’ ì»¤ë°‹

### ì½”ë“œ ì‘ì„± ì‹œì ì—ì„œì˜ "React ê´€ì  ê²€ì¦"
ìŠ¤í† ì–´ë¥¼ ë§Œë“¤ ë•Œ "ì´ ê°’ì„ Reactê°€ ì–´ë–»ê²Œ ë¹„êµí• ê¹Œ?"ë¥¼ ë°˜ì‚¬ì ìœ¼ë¡œ ë– ì˜¬ë¦¬ê³  ì‹¶ë‹¤. ì˜¤ëŠ˜ `Array.from()`ì´ ë§¤ë²ˆ ìƒˆ ì°¸ì¡°ë¥¼ ë§Œë“ ë‹¤ëŠ” ê±¸ ì•Œë©´ì„œë„ `useSyncExternalStore`ì™€ ì¡°í•©í–ˆì„ ë•Œì˜ ê²°ê³¼ë¥¼ ë¯¸ë¦¬ ì˜ˆì¸¡í•˜ì§€ ëª»í–ˆë‹¤. **DOMì´ ì•„ë‹Œ Reactì˜ reconciliation model ê´€ì ì—ì„œ ìƒê°í•˜ëŠ” ìŠµê´€.**

### ëŸ°íƒ€ì„ ê²€ì¦ì„ ë¹Œë“œ ê²€ì¦ê³¼ ë™ê¸‰ìœ¼ë¡œ
`tsc --noEmit` í†µê³¼ + `npm run build` í†µê³¼ = ì•ˆì „í•˜ë‹¤ê³  ìƒê°í–ˆì§€ë§Œ, ì‹¤ì œë¡œ Inspectorë¥¼ ì—´ë©´ í„°ì¡Œë‹¤. **ê¸°ëŠ¥ë³„ E2E í…ŒìŠ¤íŠ¸ë¥¼ ìŠ¤ëª¨í¬ í…ŒìŠ¤íŠ¸ì— í¬í•¨**ì‹œì¼œì„œ "Inspector ì—´ê¸°", "íŒ¨ë„ ì „í™˜" ê°™ì€ í•µì‹¬ ì¸í„°ë™ì…˜ë„ ìë™ ê²€ì¦í•˜ê³  ì‹¶ë‹¤.

### AST ê¸°ë°˜ ë¦¬íŒ©í„°ë§
`sed`ë¡œ import ê²½ë¡œë¥¼ ë°”ê¾¸ë‹¤ê°€ zsh glob ë¬¸ì œë¡œ 3ë²ˆ ì¬ì‹œë„í–ˆë‹¤. `ts-morph` ê°™ì€ AST ë„êµ¬ë¥¼ ë¯¸ë¦¬ ì„¸íŒ…í•´ë‘ë©´ **ì •í™•í•˜ê³  ì•ˆì „í•œ ëŒ€ê·œëª¨ import ë¦¬ë§¤í•‘**ì´ ê°€ëŠ¥í•˜ë‹¤. "ë¹¨ë¦¬ í•˜ë ¤ê³  ì‰¬ìš´ ë„êµ¬ë¥¼ ì„ íƒí•˜ë©´, ê²°êµ­ ë” ëŠë ¤ì§„ë‹¤"ëŠ” êµí›ˆ.

---

> *"ë¹¨ë¦¬ ê°€ë ¤ê³  ê±´ë„ˆë›´ ê²€ì¦ ë‹¨ê³„ê°€ ê²°êµ­ ë” í° ì‹œê°„ì„ ì¡ì•„ë¨¹ëŠ”ë‹¤."*
> â€” ì˜¤ëŠ˜ì˜ ìê¸°ë°˜ì„±
