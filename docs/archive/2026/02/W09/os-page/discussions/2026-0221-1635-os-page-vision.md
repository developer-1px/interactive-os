# OS Page â€” Discussion Journey

> **ë‚ ì§œ**: 2026-02-21 16:22â€“16:35
> **íŠ¸ë¦¬ê±°**: TestBot v2 Replay Engine êµ¬í˜„ ì¤‘ ë§‰í˜ â†’ ê·¼ë³¸ ì ‘ê·¼ë²• ì¬ê²€í† 

---

## Journey

**ğŸ§‘ ì‚¬ìš©ì**: í…ŒìŠ¤íŠ¸ë´‡2 ì´ê±° ë‹¤ì‹œ í•˜ë ¤ê³  ìƒˆë¡œ ì„¸ì…˜ì„ íŒ ì–´. ì§€ë‚œ ì„¸ì…˜ì€ ë„ì €íˆ ì´í•´ë¥¼ ëª»í•˜ëŠ” ê±° ê°™ì•„

**ğŸ¤– AI**: í˜„ì¬ ìƒíƒœë¥¼ íŒŒì•…. ReplayPanel, createVisualTestKit, visualObserver, playwright/shim â€” 5ê°œ ë ˆì´ì–´ê°€ ì–½í˜€ ìˆìŒ. êµ¬ì²´ì ìœ¼ë¡œ ì–´ë””ì„œ ë§‰í˜”ëŠ”ì§€ ì§ˆë¬¸.

---

**ğŸ§‘ ì‚¬ìš©ì**: vitestì— ìˆëŠ” ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì‹¤í–‰í•˜ë©´ `app.dispatch(addTodo(...))` ì´ëŸ° ëŠë‚Œì¸ë°... ê·¸ëŸ¬ì§€ ë§ê³  `t.pressKey("ArrowDown")` ê°™ì€ ê±¸... ë‚´ê°€ ìƒê°ì„ ì˜ëª»í–ˆë„¤;; **defineAppì—ì„œ test ì „ìš© createë¥¼ ë§Œë“¤ ìˆ˜ ìˆì—ˆì–´ì•¼ í•˜ë„¤.. ê·¸ë˜ì„œ `withOS:` ê°™ì€ê±¸ ë§Œë“¤ì—ˆêµ¬ë‚˜;;**

**ğŸ¤– AI**: ë‘ ì„¸ê³„ì˜ gap ë°œê²¬:
- Todo unit test: `dispatch(cmd) â†’ state` (ì•± ë¡œì§ only)
- APG integration: `pressKey â†’ attrs` (OS ë¡œì§ only)
- ì›í•˜ëŠ” ê²ƒ: `pressKey â†’ ì•± state + attrs` (Full Stack Headless)

`defineApp.create({ withOS: true })`ê°€ ì´ë¯¸ ì•±+OS ê²©ë¦¬ ì»¤ë„ì„ ë§Œë“¤ì§€ë§Œ, `pressKey/attrs` APIê°€ ì—†ìŒ.

---

**ğŸ§‘ ì‚¬ìš©ì**: `app.test.pressKey("A")` `app.test.click("apple")` ë­ ì´ëŸ°ê±¸ ì œê³µí•´ì•¼ í•˜ë‚˜? e2e shimì´ ì•„ë‹ˆë¼ **í†µí•©í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ë‚´ê°€ ì œê³µ**ì„ í•˜ê³  ì‹¶ì€ë°? ê·¸ë˜ì•¼ dispatchê°€ ì•„ë‹Œ ë°©ì‹ìœ¼ë¡œ í†µí•© í…ŒìŠ¤íŠ¸ë¥¼ í•´ì•¼ **í›¨ì”¬ë” í˜„ì‹¤ì˜ ë¬¸ì œë¥¼ LLMì´ ìˆ˜ì •í•  ìˆ˜ ìˆì§€**

**ğŸ¤– AI**: í•µì‹¬ Warrant í™•ì¸ â€” `dispatch` ìˆ˜ì¤€ í…ŒìŠ¤íŠ¸ëŠ” í‚¤â†’ì»¤ë§¨ë“œ í•´ì„ íŒŒì´í”„ë¼ì¸ì˜ ë²„ê·¸ë¥¼ ì¡ì„ ìˆ˜ ì—†ë‹¤. `pressKey` ìˆ˜ì¤€ì´ í˜„ì‹¤ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ì— ë” ê°€ê¹Œìš´ ì‹ í˜¸ë¥¼ ì œê³µí•œë‹¤.

---

**ğŸ§‘ ì‚¬ìš©ì**: vitestì•¼ appì—ê²Œ ì§ì ‘ ë°˜ì‘í•˜ê²Œ í•˜ëŠ”ê²Œ ë§ì§€. broadcastë°©ì‹ì´ë©´ íŠ¹ì • ì•±ë§Œ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³¼ìˆ˜ëŠ” ì—†ì„êº¼ì•¼. **page.gotoì™€ ìœ ì‚¬í•œ headlessê°™ì€ê±°ì§€. playwrightì˜ pageì˜ ê°œë…ê³¼ ë” ë¹„ìŠ·í• ìˆ˜ë„ ìˆê² ë‹¤**

**ğŸ¤– AI**: ë§ë‹¤ â€” `defineApp.create({ withOS: true })`ëŠ” ì´ë¯¸ Playwrightì˜ `Page`ì™€ ë™í˜•. ê²©ë¦¬ëœ ì»¤ë„ = ê²©ë¦¬ëœ íƒ­. ì—¬ê¸°ì— `pressKey/click/attrs`ë§Œ ë¶™ì´ë©´ ëœë‹¤.

---

**ğŸ§‘ ì‚¬ìš©ì**: **playwrightì˜ page ì¸í„°í˜ì´ìŠ¤ë¥¼ í‰ë‚´ë‚´ì„œ OSì—ì„œ ì œê³µí•˜ì**

**ğŸ¤– AI**: ShimPage(ê¸°ì¡´, DOM ê¸°ë°˜)ì™€ OSPage(ì›í•˜ëŠ” ê²ƒ, ì»¤ë„ ê¸°ë°˜) ë¹„êµ. Playwright API ë™í˜•ìœ¼ë¡œ í•™ìŠµ ë¹„ìš© 0.

---

**ğŸ§‘ ì‚¬ìš©ì**: ë§ì•„ **ê¸°ì¡´ì„ ë ˆê±°ì‹œë¡œ ê°„ì£¼í•˜ê³  ì™„ì „íˆ v2ë¡œ ê°„ë‹¤**

**ğŸ¤– AI**: ë§ˆì§€ë§‰ gap í•´ì†Œ â€” `zone.bind()`ì˜ `onDelete/onAction/onCheck/keybindings`ê°€ ì´ë¯¸ ì„ ì–¸ì ì´ë¼ DOM ì—†ì´ headless ì»¤ë„ì— ë“±ë¡ ê°€ëŠ¥. ëª¨ë“  ì¡°ê°ì´ ì´ë¯¸ ìˆë‹¤.

---

**ğŸ§‘ ì‚¬ìš©ì**: í…ŒìŠ¤íŠ¸ë´‡2 ì´ì „ì— **ì´ê²Œ ì„ í–‰ì´ ë˜ì–´ì•¼ ê°€ëŠ¥**í•˜ê² ë„¤.

> **í•œ ì¤„ ìš”ì•½**: TestBot v2ë¥¼ ë§Œë“¤ë ¤ë‹¤ ê·¼ë³¸ìœ¼ë¡œ ëŒì•„ê°€ì„œ, OSê°€ Playwright Page ë™í˜•ì˜ headless integration test APIë¥¼ first-classë¡œ ì œê³µí•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ë°œê²¬.

---

## Conclusion

### Why

LLMì´ í˜„ì‹¤ì˜ ë²„ê·¸ë¥¼ ê³ ì¹˜ë ¤ë©´ `dispatch(command)` ìˆ˜ì¤€ì´ ì•„ë‹ˆë¼ `pressKey("Delete")` ìˆ˜ì¤€ì˜ í…ŒìŠ¤íŠ¸ê°€ í•„ìš”í•˜ë‹¤. ìœ ì €ëŠ” ì»¤ë§¨ë“œë¥¼ ëª¨ë¥¸ë‹¤. ìœ ì €ëŠ” í‚¤ë¥¼ ëˆ„ë¥¸ë‹¤.

### Intent

OSê°€ Playwrightì˜ `Page`ì™€ ë™í˜•ì¸ headless integration test ì¸í„°í˜ì´ìŠ¤ë¥¼ first-classë¡œ ì œê³µí•œë‹¤. `defineApp.createPage()` â†’ ê²©ë¦¬ëœ ì•± í™˜ê²½ì—ì„œ `pressKey/click/attrs`ë¡œ Full Stack ê²€ì¦.

### Warrants

| # | Warrant |
|---|---------|
| W1 | `defineApp.create({ withOS: true })`ëŠ” ì´ë¯¸ ê²©ë¦¬ ì»¤ë„ = Page ë™í˜•ì²´ |
| W2 | `resolveKeyboard â†’ dispatch`ë¡œ DOM ì—†ì´ í‚¤ë³´ë“œ íŒŒì´í”„ë¼ì¸ ë™ì‘ ì¦ëª… (createTestOsKernel) |
| W3 | `dispatch` ìˆ˜ì¤€ í…ŒìŠ¤íŠ¸ëŠ” í‚¤â†’ì»¤ë§¨ë“œ í•´ì„ íŒŒì´í”„ë¼ì¸ ë²„ê·¸ë¥¼ ì¡ì„ ìˆ˜ ì—†ë‹¤ |
| W4 | `pressKey` ìˆ˜ì¤€ í…ŒìŠ¤íŠ¸ëŠ” í˜„ì‹¤ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ì— ë” ê°€ê¹Œìš´ ì‹ í˜¸ë¥¼ LLMì—ê²Œ ì œê³µ |
| W5 | ê²©ë¦¬ ì»¤ë„ì´ë¯€ë¡œ broadcast ë¬¸ì œ ì—†ìŒ â€” í•œ ì•±ë§Œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ |
| W6 | Playwright APIë¥¼ í‰ë‚´ë‚´ë©´ í•™ìŠµ ë¹„ìš© 0 (Rule #6 POLA) |
| W7 | "OSëŠ” í–‰ë™ì„ ì œê³µí•œë‹¤" (Rule #8) â†’ í…ŒìŠ¤íŠ¸ ì¸í„°ë™ì…˜ë„ OSì˜ í–‰ë™ |
| W8 | `zone.bind()`ì˜ `onDelete/onAction/onCheck/keybindings`ê°€ ì´ë¯¸ ì„ ì–¸ì  â€” DOM ì—†ì´ headless ë“±ë¡ ê°€ëŠ¥ |

### í•œ ì¤„ ìš”ì•½

**OSê°€ Playwright Pageë¥¼ ì œê³µí•˜ë©´, ê°™ì€ í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ headless(vitest)ì—ì„œë„ visual(ë¸Œë¼ìš°ì €)ì—ì„œë„ ë™ì‘í•˜ê³ , ê·¸ê²ƒì´ TestBot v2ì˜ ì§„ì§œ ê¸°ë°˜ì´ ëœë‹¤.**
